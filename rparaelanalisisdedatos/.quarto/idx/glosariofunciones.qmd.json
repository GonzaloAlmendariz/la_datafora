{"title":"Glosario de funciones y operaciones útiles en R","markdown":{"yaml":{"execute":{"warning":false,"message":false}},"headingText":"Glosario de funciones y operaciones útiles en R","containsRefs":false,"markdown":"\n\n\n## Vectores\n\nLos vectores son estructuras básicas en R que almacenan datos del mismo tipo.\n\n**Funciones comunes**\n\n1.  **`append`**: Agrega elementos al final de un vector. Utiliza esta función para añadir uno o más elementos a un vector existente.\n\n```{r}\nmi_vector = c(1, 2, 3) # Vector inicial\nmi_vector = append(mi_vector, c(4, 5)) # Agrega los números 4 y 5 al final\nmi_vector\n```\n\n2.  **`c`**: Combina valores para crear un vector. Es la forma más sencilla de crear un vector.\n\n```{r}\nmi_vector = c(1, 2, 3, 4, 5) # Combina los valores 1, 2, 3, 4 y 5 en un vector\nmi_vector\n```\n\n3.  **`diff`**: Calcula las diferencias entre elementos consecutivos. Devuelve un nuevo vector con la diferencia entre cada par de elementos consecutivos.\n\n```{r}\nmi_vector = c(1, 2, 4, 8, 16, 32)\ndiff(mi_vector)\n```\n\n4.  **`length`**: Obtiene la longitud de un vector. Te permite conocer cuántos elementos contiene el vector.\n\n```{r}\nmi_vector = c(1, 2, 3, 4, 5, 6)\nlength(mi_vector)\n```\n\n5.  **`rev`**: Invierte el orden de los elementos de un vector. Útil si necesitas trabajar con los elementos en orden inverso.\n\n```{r}\nmi_vector = c(1, 2, 3, 4, 5)\nrev(mi_vector)\n```\n\n6.  **`seq`**: Genera una secuencia de números. Permite definir el número inicial (`from`), el número final (`to`) y el tamaño del paso (`by`).\n\n```{r}\nseq(from = 0, to = 50, by = 5)\n```\n\n7.  **`sort`**: Ordena un vector. Puedes ordenar un vector en orden ascendente (por defecto) o descendente utilizando el argumento `decreasing`.\n\n```{r}\nmi_vector = c(3, 1, 4, 2, 5)\nsort(mi_vector) # Orden ascendente\nsort(mi_vector, decreasing = TRUE) # Orden descendente\n```\n\n8.  **`unique`**: Devuelve los valores únicos de un vector. Elimina duplicados y muestra solo los valores distintos.\n\n```{r}\nmi_vector = c(1, 1, 2, 3, 3, 4)\nunique(mi_vector)\n```\n\n**Operaciones útiles**\n\n1.  **Concatenación de vectores**\\\n    Se pueden combinar múltiples vectores utilizando `c`.\n\n```{r}\nvector1 = c(1, 2, 3)\nvector2 = c(4, 5)\nc(vector1, vector2)\n```\n\n2.  **Repetición de valores**\\\n    Usa `rep` para repetir elementos de un vector. Hay dos opciones principales:\n\n-   `times`: Repite toda la secuencia el número de veces indicado.\n-   `each`: Repite cada elemento de la secuencia el número de veces indicado.\n\n```{r}\nrep(1:3, times = 2)  # Repite la secuencia completa 1, 2, 3 dos veces\nrep(1:3, each = 2)   # Repite cada elemento (1, 2, 3) dos veces\n```\n\n3.  **Generación de números aleatorios**\\\n    Usa `sample` para obtener valores aleatorios de un vector.\n\n-   `size`: Especifica cuántos valores quieres seleccionar.\n-   `replace`: Indica si los valores pueden repetirse (`TRUE`) o no (`FALSE`).\n\n```{r}\nsample(1:10, size = 5)  # Selecciona 5 números aleatorios del 1 al 10\nsample(1:10, size = 5, replace = TRUE)  # Permite que los valores se repitan\n```\n\n4.  **Suma de vectores elemento a elemento**\\\n    Si los vectores tienen la misma longitud, los elementos correspondientes se suman automáticamente.\n\n```{r}\nvector1 = c(1, 2, 3)\nvector2 = c(4, 5, 6)\nvector1 + vector2  \n```\n\n5.  **Multiplicación elemento a elemento**\\\n    Similar a la suma, pero multiplica los elementos correspondientes.\n\n```{r}\nvector1 = c(2, 4, 6)\nvector2 = c(1, 3, 5)\nvector1 * vector2  \n```\n\n6.  **Operaciones lógicas**\\\n    Se aplican condiciones a los elementos del vector, devolviendo un vector lógico (`TRUE` o `FALSE`) para cada elemento. Además, puedes:\n\n-   Contar cuántos elementos cumplen la condición usando `sum()`.\n-   Seleccionar elementos que cumplen la condición usando `[]`.\n\n```{r}\nmi_vector = c(10, 20, 30, 40, 50)\n\n# ¿Cuáles elementos son mayores a 25?\nmi_vector > 25  \n\n# ¿Cuántos elementos son mayores a 25?\nsum(mi_vector > 25) \n\n# Seleccionar elementos mayores a 25\nmi_vector[mi_vector > 25]  \n```\n\n## Data.frames\n\nLos **data frames** son estructuras de datos bidimensionales en R, similares a tablas, donde cada columna puede contener un tipo diferente de datos (numéricos, caracteres, etc.).\n\n**Creación y visualización**\n\n1.  **Crear un data frame**\\\n    Usa la función `data.frame()` para crear un data frame combinando vectores como columnas.\n\n```{r}\nmi_dataframe = data.frame(\n  Nombre = c(\"Ana\", \"Luis\", \"Pedro\", \"Marco\", \"Fernanda\", \"Felix\", \"Diego\"),\n  Edad = c(23, 36, 35, 27, 34, 24, 41),\n  Ciudad = c(\"Ica\", \"Huaraz\", \"Cusco\", \"Cusco\", \"Lima\", \"Iquitos\", \"Huaraz\")\n)\nmi_dataframe\n```\n\n2.  **Visualizar las primeras y últimas filas**\n\n-   `head()`: Muestra las primeras filas (por defecto 6).\n-   `tail()`: Muestra las últimas filas (por defecto 6).\n\n```{r}\nhead(mi_dataframe)\ntail(mi_dataframe, 2)\n```\n\n3.  **Obtener la estructura del data frame**\n\n-   `str()`: Muestra la estructura del data frame.\n-   `summary()`: Proporciona estadísticas descriptivas básicas para cada columna.\n\n```{r}\nstr(mi_dataframe)\nsummary(mi_dataframe)\n```\n\n**Acceso y selección de datos**\n\n4.  **Acceder a una columna** Puedes acceder a una columna específica usando `$` o corchetes (`[ ]`).\n\n```{r}\nmi_dataframe$Nombre  # Accede a la columna \"Nombre\"\nmi_dataframe[[\"Edad\"]]  # Otra forma de acceder a la columna \"Edad\"\n```\n\n5.  **Acceder a filas específicas** Usa índices de filas con corchetes (`[fila, ]`).\n\n```{r}\n# Devuelve la segunda fila\nmi_dataframe[2, ]  \n```\n\n6.  **Acceder a celdas específicas** Usa índices de filas y columnas con corchetes (`[fila, columna]`).\n\n```{r}\n# Devuelve el valor en la fila 2 y columna 3\nmi_dataframe[2, 3]  # Devuelve el valor en la fila 2 y columna 3\n```\n\n7.  **Seleccionar múltiples columnas o filas** Usa índices o nombres con corchetes.\n\n```{r}\n# Selecciona columnas por nombre\nmi_dataframe[, c(\"Nombre\", \"Ciudad\")]  \n # Selecciona las primeras dos filas\nmi_dataframe[1:2, ] \n```\n\n**Filtrado de datos**\n\n8.  **Filtrar filas por condiciones** Puedes usar operadores lógicos para filtrar filas.\n\n```{r}\n# Filtra filas donde Edad > 25\nmi_dataframe[mi_dataframe$Edad > 25, ]  \n```\n\n9.  **Filtrar filas usando `%in%`** Filtra filas en base a si un valor pertenece a un conjunto.\n\n```{r}\nmi_dataframe[mi_dataframe$Ciudad %in% c(\"Cusco\", \"Lima\"), ]\n```\n\n**Edición y manipulación**\n\n10. **Añadir una nueva columna** Crea una nueva columna asignando valores directamente.\n\n```{r}\n# Añade una columna \"Salario\"\nmi_dataframe$Salario = c(1200, 2340, 1300, 2250, \n                         3000, 2600, 1850) \nmi_dataframe\n```\n\n11. **Eliminar una columna** Usa la función `NULL` para eliminar una columna.\n\n```{r}\n# Elimina la columna \"Salario\"\nmi_dataframe$Salario = NULL  \nmi_dataframe\n```\n\n12. **Renombrar columnas** Modifica los nombres de las columnas utilizando `colnames()`.\n\n```{r}\n# Cambia los nombres de las columnas\ncolnames(mi_dataframe) = c(\"Nombre\", \"Edad\", \"Vivienda\")  \nmi_dataframe\n```\n\n13. **Ordenar el data frame** Usa la función `order()` para ordenar las filas según una columna.\n\n```{r}\n# Ordena por la columna \"Edad\"\nmi_dataframe = mi_dataframe[order(mi_dataframe$Edad), ] \n\nmi_dataframe\n```\n\n14. **Combinar data frames**\n\n-   `rbind()`: Combina data frames por filas.\n-   `cbind()`: Combina data frames por columnas.\n\n```{r}\n# Combinar filas\notro_dataframe = data.frame(Nombre = \"Oscar\", Edad = 28, Vivienda = \"Lima\")\nmi_dataframe = rbind(mi_dataframe, otro_dataframe)\nmi_dataframe\n\n# Combinar columnas\nnueva_columna = data.frame(Salario = c(1200, 2340, 1300, 2250, \n                         3000, 2600, 1850, 2300))\nmi_dataframe = cbind(mi_dataframe, nueva_columna)\nmi_dataframe\n```\n\n15. **Eliminar filas** Usa índices negativos para eliminar filas.\n\n```{r}\n# Elimina la segunda fila\nmi_dataframe = mi_dataframe[-2, ] \n\nmi_dataframe\n```\n\n**Resúmenes y cálculos**\n\n16. **Obtener valores únicos** Usa `unique()` para obtener valores únicos en una columna.\n\n```{r}\nunique(mi_dataframe$Vivienda)\n```\n\n17. **Contar filas y columnas** Usa las funciones `nrow()` y `ncol()`.\n\n```{r}\n# Número de filas\nnrow(mi_dataframe)  \n# Número de columnas\nncol(mi_dataframe)  \n```\n\n18. **Calcular estadísticas básicas** Aplica funciones como `mean()`, `sum()`, `min()`, `max()` a columnas numéricas.\n\n```{r}\n# Edad promedio\nmean(mi_dataframe$Edad)  \n# Suma total de las edades\nsum(mi_dataframe$Edad)   \n```\n\n19. **Tablas de frecuencias** Usa `table()` para crear una tabla de frecuencias.\n\n```{r}\ntable(mi_dataframe$Vivienda)  # Frecuencia de valores en la columna \"Ciudad\"\n```\n\nA partir de ahora trabajaremos con una encuesta ficticia diseñada para analizar la relación entre **edad, ingreso, nivel educativo y satisfacción personal**. Contiene información sobre **500 personas**.\n\n```{r}\nlibrary(readr)\nencuesta = read_csv('glosario.csv')\n```\n\n## Limpieza y reestructuración de datos\n\n```{r, warning=FALSE}\nlibrary(tidyverse)\n```\n\nLa limpieza de datos es un paso fundamental en todo análisis cuantitativo, ya que garantiza la calidad, consistencia y fiabilidad de los resultados. Errores como nombres mal escritos, valores faltantes, codificaciones inconsistentes o estructuras duplicadas pueden distorsionar el análisis y generar conclusiones erróneas. T\n\nTomaremos como punto de referencia un dataset con múltiples problemas intencionados, el cual servirá como ejemplo para aplicar herramientas como `janitor`, `stringr`, `naniar` y `tidyr`, de gran ayuda para transformar datos sucios en insumos analíticos ordenados y listos para modelar o visualizar.\n\n```{r}\ndf = read_csv('limpieza.csv')\n```\n\n```{r}\nhead(df, 12)\n```\n\n1.  Limpieza de nombre de columnas\n\n```{r}\ncolnames(df)\n```\n\n```{r}\nlibrary(janitor)\n```\n\n```{r}\ndf = df %>% \n  clean_names()\n```\n\n```{r}\ncolnames(df)\n```\n\n2.  Limpieza de strings y numericos\n\nLos errores tipográficos, los formatos inconsistentes y las codificaciones irregulares son comunes en datos reales, especialmente en variables de texto como nombres o categorías como el sexo.\n\n**Limpieza de** `nombre_completo`\n\nPrimero, cargamos el paquete `stringr`, un paquete dedicado a trabajar con cadenas de texto.\n\n```{r}\nlibrary(tidyverse)\nlibrary(stringr)\n```\n\nLuego, realizamos una transformación paso a paso de la variable `nombre_completo` para corregir errores comunes, estandarizar escritura y eliminar inconsistencias:\n\n```{r}\ndf = df %>%\n  mutate(\n    # Paso 1: Pasamos todo a minúsculas para evitar duplicidades por mayúsculas\n    nombre_completo = str_to_lower(nombre_completo),\n\n    # Paso 2: Reemplazamos caracteres con tilde o especiales por sus equivalentes planos\n    nombre_completo = str_replace_all(nombre_completo, \"á\", \"a\"),\n    nombre_completo = str_replace_all(nombre_completo, \"é\", \"e\"),\n    nombre_completo = str_replace_all(nombre_completo, \"í\", \"i\"),\n    nombre_completo = str_replace_all(nombre_completo, \"ó\", \"o\"),\n    nombre_completo = str_replace_all(nombre_completo, \"ú\", \"u\"),\n    nombre_completo = str_replace_all(nombre_completo, \"ñ\", \"n\"),\n\n    # Paso 3: Eliminamos símbolos no deseados como @, guiones bajos, espacios múltiples\n    nombre_completo = str_replace_all(nombre_completo, \"@\", \"a\"),\n    nombre_completo = str_replace_all(nombre_completo, \"_\", \" \"),\n    nombre_completo = str_replace_all(nombre_completo, \"[[:space:]]+\", \" \"),\n    nombre_completo = str_trim(nombre_completo),  # elimina espacios al inicio o final\n\n    # Paso 4: Correcciones específicas a errores conocidos por observación del dataset\n    nombre_completo = case_when(\n      str_detect(nombre_completo, \"sofiaramos\") ~ \"sofia ramos\",\n      str_detect(nombre_completo, \"anaperez\") ~ \"ana perez\",\n      str_detect(nombre_completo, \"luciahuerta\") ~ \"lucia huerta\",\n      str_detect(nombre_completo, \"mariovargas\") ~ \"mario vargas\",\n      str_detect(nombre_completo, \"carlosdiaz\") ~ \"carlos diaz\",\n      str_detect(nombre_completo, \"luisgomez\") ~ \"luis gomez\",\n      TRUE ~ nombre_completo\n    ),\n\n    # Paso 5: Finalizamos capitalizando la primera letra de cada palabra \n    nombre_completo = str_to_title(nombre_completo)\n  )\n```\n\nCon estas transformaciones, se evita que registros iguales aparezcan como diferentes por errores de digitación, acentos o diferencias en capitalización.\n\n**Homogeneización de la variable** `sexo`\n\nEn variables categóricas como `sexo`, donde pueden coexistir múltiples formas de referirse a una misma categoría (\"masculino\", \"m\", \"hombre\", etc.), es fundamental normalizar los valores. Aplicamos una transformación similar:\n\n```{r}\ndf = df %>%\n  mutate(\n    # Paso 1: Todo a minúsculas\n    sexo = tolower(sexo),\n\n    # Paso 2: Reescribimos variantes en etiquetas estándar\n    sexo = case_when(\n      sexo %in% c(\"masculino\", \"m\", \"hombre\") ~ \"masculino\",\n      sexo %in% c(\"femenino\", \"f\", \"mujer\") ~ \"femenino\",\n      TRUE ~ NA_character_  # valores irreconocibles se dejan como NA\n    )\n  )\n```\n\nEn este punto, la base ya está considerablemente más limpia y lista para ser usada con métodos estadísticos o gráficos.\n\n```{r}\nhead(df)\n```\n\n3.  Valores perdidos\n\nEn el análisis de datos reales, lidiar con valores perdidos es inevitable. Ya sea por errores en la recolección, datos incompletos o fallas de ingreso, siempre es necesario diagnosticar y decidir cómo abordarlos.\n\nEl paquete `naniar` facilita la visualización y exploración de patrones de `NA` en un dataset. Permite entender en qué columnas se concentran los valores faltantes y si hay patrones comunes entre ellos.\n\n```{r}\nlibrary(naniar)\n```\n\nUna forma rápida de visualizar cuántos `NA` hay por variable es:\n\n```{r}\ngg_miss_var(df)\n```\n\nY si deseamos identificar observaciones con múltiples valores perdidos, usamos:\n\n```{r}\ngg_miss_case(df)\n```\n\nEsto nos ayuda a decidir si queremos eliminar observaciones o columnas con muchos datos ausentes o proceder a imputarlos. A veces basta con eliminar observaciones incompletas si son pocas o si el análisis requiere datos completos. `tidyr` ofrece funciones útiles como `drop_na()`:\n\nEliminar observaciones con `NA` **en columnas clave** (por ejemplo, nombre o sexo):\n\n```{r}\ndf = df %>%\n  drop_na(nombre_completo, sexo, encuesta_fecha) \n\ndim(df)\n```\n\nEliminar observaciones con al menos un `NA` en **cualquier columna**:\n\n```{r}\ndf %>%\n  drop_na() %>% \n  dim()\n```\n\nEsto reduce el tamaño de la base pero garantiza integridad completa. Sin embargo, no siempre es deseable perder datos. En esos casos, se puede imputar.\n\nEl paquete `mice` (*Multivariate Imputation by Chained Equations*) permite realizar una **imputación más inteligente**, modelando los valores ausentes con base en otras variables.\n\n```{r}\nlibrary(mice)\n```\n\nEste paquete nos permite aplicar un algoritmo de imputación. Por ejemplo, para una imputación rápida:\n\n```{r, warning=FALSE}\nimputado = mice(df, m = 1, method = \"pmm\", seed = 123)\n```\n\n-   `m = 1`: número de datasets imputados. Se puede aumentar si se desea evaluar incertidumbre.\n-   `method = \"pmm\"`: *predictive mean matching*, útil para imputar variables numéricas.\n-   `seed`: asegura que los resultados sean reproducibles.\n\nUna vez realizado el proceso, se extrae el dataset completo con:\n\n```{r}\ndf = complete(imputado)\n```\n\nCon esto, se preservan todas las observaciones, pero con los valores faltantes sustituidos por predicciones consistentes con la estructura de los datos. Este método es especialmente útil cuando hay varias variables correlacionadas o cuando perder datos no es una opción que podamos costear.\n\n```{r}\ngg_miss_var(df)\n```\n\n```{r}\nhead(df)\n```\n\n3.  Observaciones duplicados\n\nLos duplicados pueden surgir por errores en la recolección, registros múltiples del mismo individuo o procesos de integración de bases de datos. Si no se detectan y corrigen, pueden sesgar promedios, inflar conteos y distorsionar cualquier análisis posterior.\n\nLa forma más directa de detectar duplicados es verificar si existen filas exactamente iguales en todas las columnas:\n\n```{r}\ndf %>% \n  duplicated() %>% \n  sum()\n```\n\nSi se desea ver cuáles son esos duplicados exactos:\n\n```{r}\ndf %>% \n  filter(duplicated(.))\n```\n\nPodemos eliminarlos con `distinct()`, que retiene únicamente las filas únicas:\n\n```{r}\ndf = df %>% \n  distinct()\n```\n\nLo que nos deja con:\n\n```{r}\ndf %>% \n  duplicated() %>% \n  sum()\n```\n\n4.  Tidyr\n\nUna vez corregidos errores en las variables categóricas y estandarizados los valores faltantes o inconsistentes, es común encontrarse con problemas estructurales. Algunas columnas pueden estar duplicando información, otras pueden combinar múltiples variables en una sola. Aquí es donde entra en juego el paquete `tidyr`.\n\nEste paquete permite reorganizar los datos sin alterar su contenido: separar, unir, pivotear, rellenar o completar estructuras incompletas. Por ejemplo:\n\n**Separar: descomponer** `nombre_completo` **en** `nombre` **y** `apellido`\n\n```{r}\nlibrary(tidyr)\n\n# Separar nuevamente desde nombre_completo para asegurar consistencia\ndf = df %>%\n  separate(nombre_completo, into = c(\"nombre\", \"apellido\"), sep = \" \", extra = \"merge\", remove = FALSE)\n```\n\n-   `sep = \" \"`: se separa por el primer espacio en blanco.\n-   `extra = \"merge\"`: en caso haya más de dos componentes (ej. \"Maria del Carmen\"), los combina en `apellido`.\n-   `remove = FALSE`: conservamos la columna original por trazabilidad.\n\n```{r}\nhead(df)\n```\n\n**Unir: combinar** `puntaje_1`, `puntaje_2` **y** `puntaje_3` **en una sola columna**\n\nEn análisis posteriores puede ser útil pivotear los puntajes para analizar cada respuesta como una fila individual. Esto facilita la creación de gráficos o modelos que trabajen sobre respuestas individuales:\n\n```{r}\ndf = df %>%\n  # Sumamos todas las que empiezan con 'puntaje'\n  pivot_longer(cols = starts_with(\"puntaje_\"),\n               names_to = \"pregunta\",\n               values_to = \"puntaje\")\n```\n\nAhora cada persona aparece tres veces (una por pregunta), lo cual permite comparar puntuaciones medias entre preguntas o agrupar por categorías ahora que tenemos la variable categórica `pregunta`.\n\nAsí quedo nuestro dataset luego de la limpieza\n\n```{r}\nhead(df, 12)\n```\n\n## Dplyr para manipulacion de datos\n\nEl paquete dplyr es uno de los más utilizados en R para manipulación y transformación de datos. El operador %\\>% (pipe) es una herramienta central que permite encadenar funciones, pasando el resultado de una función como entrada a la siguiente.\n\n```{r, echo=FALSE, warning=FALSE, include = FALSE}\nlibrary(dplyr)\n```\n\n1.  `filter`: Filtrar filas según una condición\n\nEsta función selecciona solo las filas que cumplen con una o más condiciones.\n\n```{r}\n# Filtrar encuestados mayores de 30 años\nencuesta %>%\n  filter(Edad > 30) %>% \n  head(10)\n```\n\n```{r}\n# Filtrar mujeres con educación universitaria\nencuesta %>%\n  filter(Genero == \"F\", Educacion == \"Universitaria\") %>% \n  head(10)\n```\n\n2.  `select`: Seleccionar columnas específicas\n\nEsta función te permite elegir las columnas necesarias.\n\n```{r}\n# Seleccionar columnas relevantes\nencuesta %>%\n  select(ID, Genero, Satisfaccion) %>% \n  head(10)\n```\n\n3.  `mutate`: Crear o modificar columnas\n\nAñade nuevas columnas o modifica las existentes.\n\n```{r}\n# Crear una columna que clasifique a las personas como \"Joven\" o \"Adulto\"\nencuesta %>%\n# Personas menores o iguales a 30 como \"Jovenes\"\n  mutate(RangoEdad = \n           ifelse(Edad <= 30, \"Joven\", \"Adulto\")) %>% \n  head(10)\n```\n\n4.  `arrange`: Ordenar filas\n\nOrdena las filas del data frame según una o más columnas.\n\n```{r}\n# Ordenar por edad de menor a mayor\nencuesta %>%\n  arrange(Edad) %>% \n  head(10)\n```\n\n```{r}\n# Ordenar por satisfacción de mayor a menor\nencuesta %>%\n  arrange(desc(Satisfaccion)) %>% \n  head(10)\n```\n\n```{r}\n# Ordenar primero por género y luego por nivel educativo\nencuesta %>%\n  arrange(Genero, desc(Educacion)) %>% \n  head(10)\n```\n\n5.  Resumir datos (agrupados)\n\n-   `reframe` Calcula métricas agregadas como promedios, totales o máximos en devolver cualquier número de filas por grupo.\n-   `group_by()` agrupa los datos según una o más columnas. Esto significa que las filas se organizan en grupos definidos por los valores únicos de las columnas seleccionadas sin modificar el contenido del data framepor si solo.\n\n`reframe\\`: Calculamos la satisfacción promedio y el rango de edades por género, reduciendo los datos a una fila por grupo.\n\n```{r}\n# Calcular métricas resumidas por género\nencuesta %>%\n  group_by(Genero) %>% # Agrupar por género\n  reframe(\n# Promedio de satisfacción\n        SatisfaccionPromedio = mean(Satisfaccion)\n  ) \n```\n\n`reframe` con `group_by`: Agrupar y resumir datos.\n\n```{r}\n# Calcular satisfacción promedio por género\nresumen_genero = encuesta %>%\n  group_by(Genero) %>%\n  reframe(SatisfaccionPromedio = mean(Satisfaccion))\nresumen_genero\n```\n\n```{r}\n# Calcular edad máxima y mínima por nivel educativo\nresumen_educacion = encuesta %>%\n  group_by(Educacion) %>%\n  reframe(\n    EdadMaxima = max(Edad),\n    EdadMinima = min(Edad)\n  )\nresumen_educacion\n```\n\nPuedes realizar varias operaciones en una sola secuencia. Por ejemplo:\n\n**Filtrar adultos, calcular satisfacción promedio por rango de edad y ordenar resultados.**\n\n```{r}\n# Filtrar, agrupar y ordenar\nencuesta %>%\n# Personas menores o iguales a 30 como \"Jovenes\"\n  mutate(RangoEdad = \n           ifelse(Edad <= 30, \"Joven\", \"Adulto\")) %>%\n# Agrupar por género\n      group_by(RangoEdad) %>%   \n# Calcular métricas resumidas\n      summarise(             \n      SatisfaccionPromedio = mean(Satisfaccion)) %>%\n# Ordenar por satisfacción promedio\n  arrange(desc(SatisfaccionPromedio)) \n```\n\nSí, hay varias funciones interesantes en **`dplyr`** que podrías agregar a tu apartado para ampliar las capacidades de manipulación de datos. Aquí te dejo algunas funciones adicionales que pueden mejorar el análisis y limpieza de datos:\n\n6.  `rename()`: Renombrar columnas\n\n    Si necesitas cambiar el nombre de una columna, puedes usar `rename()`.\\\n\n```{r}\nencuesta %>%\n  rename(Satisfaccion_Gestion = Satisfaccion) %>% \n  head(3)\n```\n\n7.  `relocate()`: Reordenar columnas\n\n    Si quieres cambiar el orden de las columnas en un `data.frame`, usa `relocate()`.\n\n```{r}\nencuesta %>%\n  relocate(Satisfaccion, .before = ID) %>% \n  head(3)\n```\n\n8.  `distinct()`: Eliminar duplicados\n\n    Si hay valores duplicados en el `data.frame`, `distinct()` los elimina y deja solo las observaciones únicas.\\\n\n```{r}\nencuesta %>%\n  distinct() %>% \n  head(3)\n```\n\n9.  `count()`: Contar frecuencias de una variable categórica\n\n    Puedes contar la cantidad de observaciones por categoría.\\\n\n```{r}\nencuesta %>%\n  count(Educacion)\n```\n\n10. `slice()`: Seleccionar filas específicas\n\n    Si necesitas extraer ciertas filas según su posición:\\\n\n```{r}\n# Seleccionar las primeras 3 filas\nencuesta %>%\n  slice(1:3)\n\n# Seleccionar la fila número 5\nencuesta %>%\n  slice(5)\n```\n\n11. `case_when()`: Crear variables con múltiples condiciones\n\n    Es una versión más potente de `ifelse()`, útil cuando tienes muchas condiciones.\\\n\n```{r}\n# Crear una columna con niveles de satisfacción\nencuesta %>%\n  mutate(Satisfaccion_Categoria = case_when(\n    Satisfaccion >= 4 ~ \"Alta\",\n    Satisfaccion == 3 ~ \"Media\",\n    TRUE ~ \"Baja\"\n  )) %>% \n  head(10)\n```\n\n## Ggplot para la elaboración de gráficos\n\nEl paquete **`ggplot2`** es una herramienta poderosa para la visualización de datos en R. Se basa en **capas (`layers`)**, lo que permite personalizar gráficos de manera progresiva.\n\n```{r}\nlibrary(ggplot2)\n```\n\nHay algunos argumentos generales que pueden usarse en la mayoría de gráficos\n\n| **Argumento** | **Descripción**                                   |\n|---------------|---------------------------------------------------|\n| `color`       | Color del borde de elementos gráficos             |\n| `fill`        | Color de relleno en elementos como barras o áreas |\n| `alpha`       | Nivel de transparencia (0 a 1)                    |\n| `size`        | Tamaño de puntos, líneas o texto                  |\n| `shape`       | Forma de los puntos (en `geom_point()`)           |\n| `linetype`    | Tipo de línea (continua, punteada, etc.)          |\n| `stroke`      | Grosor del borde en puntos                        |\n\n1.  Gráfico de Dispersión (`geom_point()`)\n\n```{r}\nggplot(encuesta, aes(x = Edad, y = Ingreso)) +\n  geom_point(size = 3, \n             shape = 16, \n             color = \"blue\", \n             alpha = 0.7, \n             stroke = 1) +\n  labs(title = \"Gráfico de Dispersión\", \n       x = \"Edad\", \n       y = \"Ingreso\") +\n  theme_minimal()\n```\n\n2.Histograma (`geom_histogram()`)\n\n```{r}\nggplot(encuesta, aes(x = Ingreso)) +\n  geom_histogram(bins = 10, \n                 fill = \"steelblue\", \n                 color = \"black\", \n                 alpha = 0.7, \n                 boundary = 0) +\n  labs(title = \"Histograma de Ingresos\", \n       x = \"Ingreso\", \n       y = \"Frecuencia\") +\n  theme_minimal()\n```\n\n3.  Boxplot (`geom_boxplot()`)\n\n```{r}\nggplot(encuesta, aes(x = Genero, \n               y = Ingreso, \n               fill = Genero)) +\n  geom_boxplot(outlier.color = \"darkgreen\") +\n  labs(title = \"Boxplot de Ingreso por Género\", \n       x = \"Género\", \n       y = \"Ingreso\") +\n  theme_minimal()\n```\n\n4.  Gráfico de Barras (`geom_bar()`)\n\n```{r}\nggplot(encuesta, aes(x = Educacion, \n               fill = Educacion)) +\n  geom_bar(width = 0.7, \n           alpha = 0.8, \n           color = \"black\") +\n  labs(title = \"Frecuencia de Nivel Educativo\", \n       x = \"Nivel Educativo\", \n       y = \"Cantidad\",\n       fill = \"Niv. Ed.\") +\n  theme_minimal()\n```\n\n5.  Gráfico de Líneas (`geom_line()`)\n\n```{r}\nset.seed(123)\nencuesta %>% \n  sample_n(20) %>% \nggplot(aes(x = Edad, y = Ingreso)) +\n  geom_line(color = \"blue\", size = 1, linetype = \"dashed\") +\n  geom_point(size = 3, color = \"red\") +\n  labs(title = \"Relación Edad vs Ingreso\", x = \"Edad\", y = \"Ingreso\") +\n  theme_light()\n```\n\n6.  Gráfico de Densidad (`geom_density()`)\n\n```{r}\nggplot(encuesta, aes(x = Ingreso)) +\n  geom_density(fill = \"lightblue\", \n               alpha = 0.7, \n               adjust = 1.5, \n               linetype = \"solid\") +\n  labs(title = \"Densidad de Ingresos\", \n       x = \"Ingreso\", \n       y = \"Densidad\") +\n  theme_classic()\n```\n\n7.  Gráfico de Área (`geom_area()`)\n\n```{r}\nggplot(encuesta, aes(x = Edad, \n               y = Ingreso)) +\n  geom_area(fill = \"darkgreen\", \n            alpha = 0.5, \n            linetype = \"dotted\", \n            color = \"black\") +\n  labs(title = \"Área de Relación Edad vs Ingreso\", \n       x = \"Edad\", \n       y = \"Ingreso\") +\n  theme_classic()\n```\n\n8.  Facetas con `facet_wrap()`\n\n```{r}\nggplot(encuesta, aes(x = Ingreso, \n                     fill = Genero)) +\n  geom_histogram(bins = 10, \n                 alpha = 0.7, \n                 color = 'black') +\n  facet_wrap(~Genero) +\n  labs(title = \"Histograma de Ingresos por Género\") +\n  theme_minimal()\n```\n\n9.  Gráfico de Barras Apilado (`position = \"stack\"`)\n\n```{r}\nggplot(encuesta, aes(x = Educacion, \n                     fill = Genero)) +\n  geom_bar(position = \"stack\", \n           alpha = 0.8, \n           width = 0.7) +\n  labs(title = \"Distribución de Género por Nivel Educativo\") +\n  theme_minimal()\n```\n\n10. Gráfico de Barras Apilado Proporcional (`position = \"fill\"`)\n\n```{r}\nggplot(encuesta, aes(x = Educacion, \n                     fill = Genero)) +\n  geom_bar(position = \"fill\") +\n  labs(title = \"Proporción de Género por Nivel Educativo\", \n       y = \"Proporción\") +\n  theme_light()\n```\n\n11. Gráfico de Violin (`geom_violin()`)\n\nUn gráfico de violín combina un boxplot y una curva de densidad, mostrando la distribución de una variable numérica a lo largo de una categórica. Permite visualizar la mediana, la dispersión y la forma de la distribución.\n\n```{r}\nggplot(encuesta, aes(x = Genero, \n                     y = Ingreso, \n                     fill = Genero)) +\n  geom_violin(trim = FALSE, \n              draw_quantiles = c(0.25, 0.5, 0.75)) +\n  labs(title = \"Distribución del Ingreso por Género\", \n       x = \"Género\", \n       y = \"Ingreso\") +\n  theme_minimal()\n```\n\n12. Gráfico de Dispersión con Regresión (`geom_smooth()`)\n\n-   `method = \"lm\"`: Usa regresión lineal.\n-   `se = TRUE`: Muestra el intervalo de confianza.\n\n```{r}\nset.seed(123)\nencuesta %>% \n  sample_n(50) %>% \nggplot(aes(x = Edad, y = Ingreso)) +\n  geom_point(size = 3, color = \"blue\") +\n  geom_smooth(method = \"lm\", se = TRUE, color = \"red\", linetype = \"dashed\") +\n  labs(title = \"Regresión Lineal de Edad vs Ingreso\") +\n  theme_minimal()\n```\n\n## Complementos de ggplot2\n\nEl sistema de visualización de datos en R basado en `ggplot2` ofrece una gran flexibilidad y control para generar gráficos informativos. Sin embargo, siempre podemos ir un paso más allá, ya sea para mejorar la estética, destacar información clave o combinar varias visualizaciones. Para ello, existen una serie de paquetes que complementan a `ggplot2` y amplían significativamente sus capacidades.\n\nUtilicemos los datos de `gapminder` filtrados al 2007 como ejemplo:\n\n```{r}\nlibrary(gapminder)\ngm_07 = gapminder %>% filter(year == 2007)\n```\n\n1.  `ggsci`[@ggsci]\n\nEste paquete proporciona paletas de colores inspiradas en publicaciones científicas reconocidas como *Nature*, *JAMA*, *Lancet*, *NEJM*, entre otras. Es útil cuando se busca una estética profesional y reconocible, especialmente para presentaciones o publicaciones.\n\nLa funciones principales son: `scale_fill_nejm()`, `scale_fill_lancet()`, `scale_fill_jama()` permiten aplicar directamente estas paletas en gráficos con `fill`.\n\n```{r}\nlibrary(ggsci)\n```\n\nNJEJM:\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = continent, \n                  y = lifeExp, \n                  fill = continent)) +\n  geom_boxplot() +\n  scale_fill_nejm() +\n  theme_minimal() +\n  ggtitle(\"Boxplot con paleta NEJM\")\n```\n\nLancet:\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = continent, \n                  y = lifeExp, \n                  fill = continent)) +\n  geom_boxplot() +\n  scale_fill_lancet() +\n  theme_minimal() +\n  ggtitle(\"Boxplot con paleta Lancet\")\n```\n\nJAMA:\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = continent, \n                  y = lifeExp, \n                  fill = continent)) +\n  geom_boxplot() +\n  scale_fill_jama() +\n  theme_minimal() +\n  ggtitle(\"Boxplot con paleta JAMA\")\n```\n\n2.  `viridis`\n\n`viridis` ofrece escalas de color perceptualmente uniformes, es decir, los colores cambian de manera coherente incluso para personas con discapacidad visual o en impresión en blanco y negro. Estas paletas fueron desarrolladas originalmente para Python y se adaptaron a R.\n\n-   Las funciones principales son: `scale_fill_viridis_d()` para variables categóricas y `scale_fill_viridis_c()` para variables continuas.\n-   Los argumentos más importantes son:\n    -   `option` permite seleccionar entre variantes (\"A\", \"B\", \"C\", \"D\", \"E\").\n    -   `direction` para invertir el orden de los colores.\n    -   `guide = 'none'` oculta la leyenda, útil en gráficos facetados.\n\n```{r}\nlibrary(viridis)\n```\n\nTema 'plasma':\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = lifeExp, \n                  fill = continent)) +\n  geom_histogram(binwidth = 3, \n                 color = \"black\", \n                 alpha = 0.8) +\n  scale_fill_viridis_d(guide = 'none', \n                       option = 'C') +\n  facet_wrap(~ continent) +\n  theme_minimal() +\n  ggtitle(\"Histograma de esperanza de vida por continente\")\n```\n\nTema 'cividis':\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = lifeExp, \n                  fill = continent)) +\n  geom_histogram(binwidth = 3, \n                 color = \"black\", \n                 alpha = 0.8) +\n  scale_fill_viridis_d(guide = 'none', \n                       option = 'E') +\n  facet_wrap(~ continent) +\n  theme_minimal() +\n  ggtitle(\"Histograma de esperanza de vida por continente\")\n```\n\nPuede consultar las paletas usando `?scale_fill_viridis`\n\n3.  `patchwork` [@patchwork]\n\nEste paquete permite combinar múltiples gráficos generados con `ggplot2` de forma intuitiva mediante operadores aritméticos. Es especialmente útil para mostrar comparaciones o construir narrativas visuales. - Los gráficos se combinan con `/` (vertical), `|` (horizontal), y `+` para anotaciones conjuntas. - No requiere transformar los gráficos en objetos de grid. Basta con construir gráficos individuales y luego combinarlos directamente.\n\n```{r, fig.width=6, fig.height=4}\nlibrary(patchwork)\n```\n\n```{r, fig.width=6, fig.height=4}\n# Boxplot de lifeExp \np1 = ggplot(gm_07, aes(x = lifeExp, \n                       y = '')) +\n  geom_boxplot(fill = \"darkgreen\", \n               width = 0.4) +\n  theme_minimal() +\n  labs(title = \"Boxplot de esperanza de vida\", \n       x = NULL, \n       y = \"lifeExp\")\n\n# Densidad de lifeExp\np2 = ggplot(gm_07, aes(x = lifeExp)) +\n  geom_density(fill = \"darkgreen\", \n               alpha = 0.6) +\n  theme_minimal() +\n  labs(title = \"Densidad de esperanza de vida\", \n       x = \"lifeExp\", \n       y = \"Densidad\")\n\n# Histograma de lifeExp\np3 = ggplot(gm_07, aes(x = lifeExp)) +\n  geom_histogram(binwidth = 3, \n                 fill = \"darkgreen\", \n                 color = \"black\", \n                 alpha = 0.7) +\n  theme_minimal() +\n  labs(title = \"Histograma de esperanza de vida\", \n       x = \"lifeExp\", \n       y = \"Frecuencia\")\n\n# Gráficos apilados verticalmente\n(p1 / p2 / p3)\n```\n\n4.  `ggthemes` [@ggthemes]\n\nProporciona temas visuales inspirados en medios de comunicación como *The Economist*, *Wall Street Journal* o *FiveThirtyEight*. Estos temas cambian fondo, ejes, tipografía y estilo general del gráfico. Son ideales para producir gráficos estilizados sin necesidad de personalizar manualmente cada elemento gráfico.\n\n```{r}\nlibrary(ggthemes)\n```\n\nThe Economist:\n\n```{r, fig.width=7, fig.height=4}\nggplot(gm_07, aes(x = continent, \n                  y = lifeExp, \n                  fill = continent)) +\n  geom_boxplot() +\n  theme_economist() +\n  scale_fill_economist() +\n  labs(fill = 'Continente') +\n  ggtitle(\"Estilo The Economist\")\n```\n\nWall Street Journal:\n\n```{r, fig.width=7, fig.height=4}\nggplot(gm_07, aes(x = continent, \n                  y = lifeExp, \n                  fill = continent)) +\n  geom_boxplot() +\n  theme_wsj() +\n  scale_fill_economist() +\n  labs(fill = 'Continente') +\n  ggtitle(\"Estilo Wall Street Journal\")\n```\n\n5.  `ggtext` [@ggtext]\n\nEste paquete permite utilizar etiquetas enriquecidas con HTML y Markdown dentro de `ggplot2`. Esto incluye títulos con colores, negritas, saltos de línea y estilos diferenciados por palabra.\n\n-   Funciones clave:\n    -   `element_markdown()` reemplaza a `element_text()` en `theme()` para permitir etiquetas enriquecidas.\n-   Requiere que las etiquetas sean pasadas a `ggtitle()` o `labs()` como texto procesable por `glue::glue()` o expresiones con HTML/Markdown.\n\n```{r}\nlibrary(ggtext)\n```\n\nEstablecemos la relación entre color y continente:\n\n```{r, fig.width=6, fig.height=4}\n# Colores personalizados para cada continente\ncolores_continente = c(\n  Africa = \"#E63946\",\n  Americas = \"#457B9D\",\n  Asia = \"#2A9D8F\",\n  Europe = \"#F4A261\",\n  Oceania = \"#A17DB2\"\n)\n\n# Creamos el título con etiquetas coloreadas en HTML\ntitulo_color = glue::glue(\n  \"Esperanza de vida en 2007 por continente<br>\",\n  \"<span style='color:{colores_continente['Africa']}'>**África**</span>, \",\n  \"<span style='color:{colores_continente['Americas']}'>**Américas**</span>, \",\n  \"<span style='color:{colores_continente['Asia']}'>**Asia**</span>, \",\n  \"<span style='color:{colores_continente['Europe']}'>**Europa**</span>, \",\n  \"<span style='color:{colores_continente['Oceania']}'>**Oceanía**</span>\"\n)\n```\n\nGraficamos:\n\n```{r}\n# Gráfico final\nggplot(gm_07, aes(x = continent, \n                  y = lifeExp, \n                  fill = continent)) +\n  geom_boxplot() +\n  scale_fill_manual(values = colores_continente) +\n  labs(y = 'Esperanza de vida') +\n  theme_minimal() +\n  theme(\n    axis.title.x = element_blank(),\n    axis.text.x = element_blank(),\n    axis.ticks.x = element_blank(),\n    plot.title = element_markdown(size = 14, \n                                  lineheight = 1.2),\n    legend.position = \"none\"\n  ) +\n  ggtitle(titulo_color)\n```\n\n6.  `scales` [@scales]\n\nOfrece herramientas para transformar y dar formato a valores numéricos en los ejes o leyendas de `ggplot2`. Muy útil para mostrar cifras monetarias, porcentajes o unidades más legibles.\n\n-   Existen funciones muy comunes como: `dollar_format()`, `percent_format()`, `comma_format()`, entre otras.\n-   Algunos argumentos importantes son: `prefix` o `suffix` permiten añadir símbolos o unidades y `accuracy` controla el número de decimales.\n\n```{r}\nlibrary(scales)\n```\n\nPodemos utilizarlo para monedas:\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = gdpPercap,\n                  y = lifeExp)) +\n  geom_point(color = \"steelblue\", \n             size = 3, \n             alpha = 0.8) +\n  scale_x_continuous(labels = dollar_format(prefix = \"US$\")) +\n  theme_minimal() +\n  ggtitle(\"Relación entre PIB per cápita y esperanza de vida (USD, 2007)\") +\n  labs(x = \"PIB per cápita (US$)\", \n       y = \"Esperanza de vida (años)\")\n\n```\n\nO para porcentajes:\n\n```{r, fig.width=6, fig.height=4}\n# Clasificamos esperanza de vida\ngm_07 = gm_07 %>%\n  mutate(nivel = cut(lifeExp, breaks = c(0, 60, 75, Inf), \n                     labels = c(\"Baja\", \"Media\", \"Alta\")))\n\n# Gráfico debarra horizontal dividida por proporción y continente\nggplot(gm_07, aes(y = continent, \n                  fill = nivel)) +\n  geom_bar(position = \"fill\", \n           color = \"black\") +\n  scale_x_continuous(labels = percent_format(accuracy = 1), \n                     trans = \"reverse\") +\n  labs(title = \"Distribución proporcional de esperanza de vida por continente (2007)\",\n       x = \"Porcentaje\",\n       y = NULL,\n       fill = \"Esperanza de vida\") +\n  theme_minimal()\n```\n\n7.  `gghighlight` [@gghighlight]\n\nFacilita la tarea de destacar subconjuntos de datos directamente en los gráficos sin tener que filtrar manualmente. Ideal para llamar la atención sobre casos atípicos, valores extremos o categorías específicas. - `gghighlight()` se añade como capa dentro del `ggplot` y permite condicionar el resaltado a una expresión lógica. - Argumentos útiles: - `label_key` permite mostrar etiquetas automáticas para los datos resaltados. - `use_direct_label = TRUE` mejora la legibilidad de gráficos con muchos elementos.\n\n```{r}\nlibrary(gghighlight)\n```\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = log(gdpPercap), \n                  y = lifeExp, \n                  label = country)) +\n  geom_point(size = 3, \n             alpha = 0.8) +\n  gghighlight(lifeExp > 82, \n              label_key = country) +\n  theme_minimal() +\n  ggtitle(\"Países con esperanza de vida mayor a 82 en 2007\")\n\n```\n\n## Dlookr para análisis exploratorio\n\nEl análisis exploratorio de datos (EDA) es una etapa crucial antes de aplicar cualquier modelo o técnica inferencial. Permite comprender la estructura de los datos, detectar valores atípicos, evaluar supuestos y descubrir patrones relevantes. El paquete `dlookr` fue diseñado específicamente para facilitar esta etapa.\n\n```{r}\nlibrary(dlookr)\n```\n\n1.  Resumen de Datos y Diagnóstico con `dlookr`\n\nEl paquete `dlookr` permite realizar diagnósticos detallados sobrela información en cada una de las variables en un `data.frame`.\n\n-   Número de observaciones\n\n-   Cantidad de valores perdidos por variable\n\n-   Número de valores únicos\n\n-   Tipo de dato de cada variable\n\n```{r}\ndiagnose(encuesta)\n```\n\n2.  Resumen de Variables Numéricas con `dlookr`\n\nPara obtener un **resumen detallado de las variables numéricas**, usamos `diagnose_numeric()`.\n\n-   Media, mediana, desviación estándar y varianza\n\n-   Valores mínimo y máximo\n\n-   Coeficiente de asimetría (Skewness) y curtosis\n\n-   Valores atípicos detectados\n\n```{r}\ndiagnose_numeric(encuesta)\n```\n\n3.  Resumen de Variables Categóricas con `dlookr`\n\nPara describir las **variables categóricas**, usamos `diagnose_category()`.\n\n```{r}\n# Diagnóstico de variables categóricas\ndiagnose_category(encuesta)\n```\n\nEste diagnóstico proporciona:\n\nFrecuencias absolutas y relativas de cada categoría Cantidad de valores únicos en cada variable categórica\n\nSi queremos visualizar mejor la distribución de una variable categórica, podemos utilizar `count()`:\n\n```{r}\ncount(encuesta, Educacion)\n```\n\n4.  Identificación de Valores Atípicos con `dlookr`\n\n`dlookr` también nos permite detectar **valores atípicos** en las variables numéricas.\n\nEsto mostrará:\n\n-   Cuántos valores atípicos existen\n\n-   Cuáles son esos valores extremos\n\n```{r}\ndiagnose_outlier(encuesta)\n```\n\n5.  Gráficos Descriptivos con `dlookr`\\*\n\nPodemos graficar la **distribución de nuestras variable numérica** con `plot_hist_numeric()`.\n\n```{r}\nplot_hist_numeric(encuesta)\n```\n\nPodemos usar también `plot_box_numeric()` para ver **valores atípicos** y la distribución de la variables numéricas.\n\n```{r}\n\nplot_box_numeric(encuesta)\n```\n\nPodemos usar también `plot_normality` para evaluar la normalidad de cada variable numérica y sus tranformaciones.\n\n```{r}\nplot_normality(encuesta)\n```\n\nPodemos visualizar la frecuencia del variables categóricas con `plot_bar_category()`.\n\n```{r}\nplot_bar_category(encuesta)\n```\n\n6.  Análisis Exploratorio de Correlaciones con `correlate`\n\nPara examinar relaciones entre variables numéricas, podemos usar `correlate()`.\n\n```{r}\n# Matriz de correlaciones\nencuesta %>% \n  select(Edad, Ingreso, Satisfaccion) %>% \n  correlate()\n```\n\nPara visualizar las correlaciones, utilizamos `plot_correlate()`:\n\n```{r, warning=FALSE}\n# Gráfico de correlaciones\nencuesta %>% \n  select(Edad, Ingreso, Satisfaccion) %>% \n  plot_correlate()\n```\n","srcMarkdownNoYaml":"\n\n# Glosario de funciones y operaciones útiles en R\n\n## Vectores\n\nLos vectores son estructuras básicas en R que almacenan datos del mismo tipo.\n\n**Funciones comunes**\n\n1.  **`append`**: Agrega elementos al final de un vector. Utiliza esta función para añadir uno o más elementos a un vector existente.\n\n```{r}\nmi_vector = c(1, 2, 3) # Vector inicial\nmi_vector = append(mi_vector, c(4, 5)) # Agrega los números 4 y 5 al final\nmi_vector\n```\n\n2.  **`c`**: Combina valores para crear un vector. Es la forma más sencilla de crear un vector.\n\n```{r}\nmi_vector = c(1, 2, 3, 4, 5) # Combina los valores 1, 2, 3, 4 y 5 en un vector\nmi_vector\n```\n\n3.  **`diff`**: Calcula las diferencias entre elementos consecutivos. Devuelve un nuevo vector con la diferencia entre cada par de elementos consecutivos.\n\n```{r}\nmi_vector = c(1, 2, 4, 8, 16, 32)\ndiff(mi_vector)\n```\n\n4.  **`length`**: Obtiene la longitud de un vector. Te permite conocer cuántos elementos contiene el vector.\n\n```{r}\nmi_vector = c(1, 2, 3, 4, 5, 6)\nlength(mi_vector)\n```\n\n5.  **`rev`**: Invierte el orden de los elementos de un vector. Útil si necesitas trabajar con los elementos en orden inverso.\n\n```{r}\nmi_vector = c(1, 2, 3, 4, 5)\nrev(mi_vector)\n```\n\n6.  **`seq`**: Genera una secuencia de números. Permite definir el número inicial (`from`), el número final (`to`) y el tamaño del paso (`by`).\n\n```{r}\nseq(from = 0, to = 50, by = 5)\n```\n\n7.  **`sort`**: Ordena un vector. Puedes ordenar un vector en orden ascendente (por defecto) o descendente utilizando el argumento `decreasing`.\n\n```{r}\nmi_vector = c(3, 1, 4, 2, 5)\nsort(mi_vector) # Orden ascendente\nsort(mi_vector, decreasing = TRUE) # Orden descendente\n```\n\n8.  **`unique`**: Devuelve los valores únicos de un vector. Elimina duplicados y muestra solo los valores distintos.\n\n```{r}\nmi_vector = c(1, 1, 2, 3, 3, 4)\nunique(mi_vector)\n```\n\n**Operaciones útiles**\n\n1.  **Concatenación de vectores**\\\n    Se pueden combinar múltiples vectores utilizando `c`.\n\n```{r}\nvector1 = c(1, 2, 3)\nvector2 = c(4, 5)\nc(vector1, vector2)\n```\n\n2.  **Repetición de valores**\\\n    Usa `rep` para repetir elementos de un vector. Hay dos opciones principales:\n\n-   `times`: Repite toda la secuencia el número de veces indicado.\n-   `each`: Repite cada elemento de la secuencia el número de veces indicado.\n\n```{r}\nrep(1:3, times = 2)  # Repite la secuencia completa 1, 2, 3 dos veces\nrep(1:3, each = 2)   # Repite cada elemento (1, 2, 3) dos veces\n```\n\n3.  **Generación de números aleatorios**\\\n    Usa `sample` para obtener valores aleatorios de un vector.\n\n-   `size`: Especifica cuántos valores quieres seleccionar.\n-   `replace`: Indica si los valores pueden repetirse (`TRUE`) o no (`FALSE`).\n\n```{r}\nsample(1:10, size = 5)  # Selecciona 5 números aleatorios del 1 al 10\nsample(1:10, size = 5, replace = TRUE)  # Permite que los valores se repitan\n```\n\n4.  **Suma de vectores elemento a elemento**\\\n    Si los vectores tienen la misma longitud, los elementos correspondientes se suman automáticamente.\n\n```{r}\nvector1 = c(1, 2, 3)\nvector2 = c(4, 5, 6)\nvector1 + vector2  \n```\n\n5.  **Multiplicación elemento a elemento**\\\n    Similar a la suma, pero multiplica los elementos correspondientes.\n\n```{r}\nvector1 = c(2, 4, 6)\nvector2 = c(1, 3, 5)\nvector1 * vector2  \n```\n\n6.  **Operaciones lógicas**\\\n    Se aplican condiciones a los elementos del vector, devolviendo un vector lógico (`TRUE` o `FALSE`) para cada elemento. Además, puedes:\n\n-   Contar cuántos elementos cumplen la condición usando `sum()`.\n-   Seleccionar elementos que cumplen la condición usando `[]`.\n\n```{r}\nmi_vector = c(10, 20, 30, 40, 50)\n\n# ¿Cuáles elementos son mayores a 25?\nmi_vector > 25  \n\n# ¿Cuántos elementos son mayores a 25?\nsum(mi_vector > 25) \n\n# Seleccionar elementos mayores a 25\nmi_vector[mi_vector > 25]  \n```\n\n## Data.frames\n\nLos **data frames** son estructuras de datos bidimensionales en R, similares a tablas, donde cada columna puede contener un tipo diferente de datos (numéricos, caracteres, etc.).\n\n**Creación y visualización**\n\n1.  **Crear un data frame**\\\n    Usa la función `data.frame()` para crear un data frame combinando vectores como columnas.\n\n```{r}\nmi_dataframe = data.frame(\n  Nombre = c(\"Ana\", \"Luis\", \"Pedro\", \"Marco\", \"Fernanda\", \"Felix\", \"Diego\"),\n  Edad = c(23, 36, 35, 27, 34, 24, 41),\n  Ciudad = c(\"Ica\", \"Huaraz\", \"Cusco\", \"Cusco\", \"Lima\", \"Iquitos\", \"Huaraz\")\n)\nmi_dataframe\n```\n\n2.  **Visualizar las primeras y últimas filas**\n\n-   `head()`: Muestra las primeras filas (por defecto 6).\n-   `tail()`: Muestra las últimas filas (por defecto 6).\n\n```{r}\nhead(mi_dataframe)\ntail(mi_dataframe, 2)\n```\n\n3.  **Obtener la estructura del data frame**\n\n-   `str()`: Muestra la estructura del data frame.\n-   `summary()`: Proporciona estadísticas descriptivas básicas para cada columna.\n\n```{r}\nstr(mi_dataframe)\nsummary(mi_dataframe)\n```\n\n**Acceso y selección de datos**\n\n4.  **Acceder a una columna** Puedes acceder a una columna específica usando `$` o corchetes (`[ ]`).\n\n```{r}\nmi_dataframe$Nombre  # Accede a la columna \"Nombre\"\nmi_dataframe[[\"Edad\"]]  # Otra forma de acceder a la columna \"Edad\"\n```\n\n5.  **Acceder a filas específicas** Usa índices de filas con corchetes (`[fila, ]`).\n\n```{r}\n# Devuelve la segunda fila\nmi_dataframe[2, ]  \n```\n\n6.  **Acceder a celdas específicas** Usa índices de filas y columnas con corchetes (`[fila, columna]`).\n\n```{r}\n# Devuelve el valor en la fila 2 y columna 3\nmi_dataframe[2, 3]  # Devuelve el valor en la fila 2 y columna 3\n```\n\n7.  **Seleccionar múltiples columnas o filas** Usa índices o nombres con corchetes.\n\n```{r}\n# Selecciona columnas por nombre\nmi_dataframe[, c(\"Nombre\", \"Ciudad\")]  \n # Selecciona las primeras dos filas\nmi_dataframe[1:2, ] \n```\n\n**Filtrado de datos**\n\n8.  **Filtrar filas por condiciones** Puedes usar operadores lógicos para filtrar filas.\n\n```{r}\n# Filtra filas donde Edad > 25\nmi_dataframe[mi_dataframe$Edad > 25, ]  \n```\n\n9.  **Filtrar filas usando `%in%`** Filtra filas en base a si un valor pertenece a un conjunto.\n\n```{r}\nmi_dataframe[mi_dataframe$Ciudad %in% c(\"Cusco\", \"Lima\"), ]\n```\n\n**Edición y manipulación**\n\n10. **Añadir una nueva columna** Crea una nueva columna asignando valores directamente.\n\n```{r}\n# Añade una columna \"Salario\"\nmi_dataframe$Salario = c(1200, 2340, 1300, 2250, \n                         3000, 2600, 1850) \nmi_dataframe\n```\n\n11. **Eliminar una columna** Usa la función `NULL` para eliminar una columna.\n\n```{r}\n# Elimina la columna \"Salario\"\nmi_dataframe$Salario = NULL  \nmi_dataframe\n```\n\n12. **Renombrar columnas** Modifica los nombres de las columnas utilizando `colnames()`.\n\n```{r}\n# Cambia los nombres de las columnas\ncolnames(mi_dataframe) = c(\"Nombre\", \"Edad\", \"Vivienda\")  \nmi_dataframe\n```\n\n13. **Ordenar el data frame** Usa la función `order()` para ordenar las filas según una columna.\n\n```{r}\n# Ordena por la columna \"Edad\"\nmi_dataframe = mi_dataframe[order(mi_dataframe$Edad), ] \n\nmi_dataframe\n```\n\n14. **Combinar data frames**\n\n-   `rbind()`: Combina data frames por filas.\n-   `cbind()`: Combina data frames por columnas.\n\n```{r}\n# Combinar filas\notro_dataframe = data.frame(Nombre = \"Oscar\", Edad = 28, Vivienda = \"Lima\")\nmi_dataframe = rbind(mi_dataframe, otro_dataframe)\nmi_dataframe\n\n# Combinar columnas\nnueva_columna = data.frame(Salario = c(1200, 2340, 1300, 2250, \n                         3000, 2600, 1850, 2300))\nmi_dataframe = cbind(mi_dataframe, nueva_columna)\nmi_dataframe\n```\n\n15. **Eliminar filas** Usa índices negativos para eliminar filas.\n\n```{r}\n# Elimina la segunda fila\nmi_dataframe = mi_dataframe[-2, ] \n\nmi_dataframe\n```\n\n**Resúmenes y cálculos**\n\n16. **Obtener valores únicos** Usa `unique()` para obtener valores únicos en una columna.\n\n```{r}\nunique(mi_dataframe$Vivienda)\n```\n\n17. **Contar filas y columnas** Usa las funciones `nrow()` y `ncol()`.\n\n```{r}\n# Número de filas\nnrow(mi_dataframe)  \n# Número de columnas\nncol(mi_dataframe)  \n```\n\n18. **Calcular estadísticas básicas** Aplica funciones como `mean()`, `sum()`, `min()`, `max()` a columnas numéricas.\n\n```{r}\n# Edad promedio\nmean(mi_dataframe$Edad)  \n# Suma total de las edades\nsum(mi_dataframe$Edad)   \n```\n\n19. **Tablas de frecuencias** Usa `table()` para crear una tabla de frecuencias.\n\n```{r}\ntable(mi_dataframe$Vivienda)  # Frecuencia de valores en la columna \"Ciudad\"\n```\n\nA partir de ahora trabajaremos con una encuesta ficticia diseñada para analizar la relación entre **edad, ingreso, nivel educativo y satisfacción personal**. Contiene información sobre **500 personas**.\n\n```{r}\nlibrary(readr)\nencuesta = read_csv('glosario.csv')\n```\n\n## Limpieza y reestructuración de datos\n\n```{r, warning=FALSE}\nlibrary(tidyverse)\n```\n\nLa limpieza de datos es un paso fundamental en todo análisis cuantitativo, ya que garantiza la calidad, consistencia y fiabilidad de los resultados. Errores como nombres mal escritos, valores faltantes, codificaciones inconsistentes o estructuras duplicadas pueden distorsionar el análisis y generar conclusiones erróneas. T\n\nTomaremos como punto de referencia un dataset con múltiples problemas intencionados, el cual servirá como ejemplo para aplicar herramientas como `janitor`, `stringr`, `naniar` y `tidyr`, de gran ayuda para transformar datos sucios en insumos analíticos ordenados y listos para modelar o visualizar.\n\n```{r}\ndf = read_csv('limpieza.csv')\n```\n\n```{r}\nhead(df, 12)\n```\n\n1.  Limpieza de nombre de columnas\n\n```{r}\ncolnames(df)\n```\n\n```{r}\nlibrary(janitor)\n```\n\n```{r}\ndf = df %>% \n  clean_names()\n```\n\n```{r}\ncolnames(df)\n```\n\n2.  Limpieza de strings y numericos\n\nLos errores tipográficos, los formatos inconsistentes y las codificaciones irregulares son comunes en datos reales, especialmente en variables de texto como nombres o categorías como el sexo.\n\n**Limpieza de** `nombre_completo`\n\nPrimero, cargamos el paquete `stringr`, un paquete dedicado a trabajar con cadenas de texto.\n\n```{r}\nlibrary(tidyverse)\nlibrary(stringr)\n```\n\nLuego, realizamos una transformación paso a paso de la variable `nombre_completo` para corregir errores comunes, estandarizar escritura y eliminar inconsistencias:\n\n```{r}\ndf = df %>%\n  mutate(\n    # Paso 1: Pasamos todo a minúsculas para evitar duplicidades por mayúsculas\n    nombre_completo = str_to_lower(nombre_completo),\n\n    # Paso 2: Reemplazamos caracteres con tilde o especiales por sus equivalentes planos\n    nombre_completo = str_replace_all(nombre_completo, \"á\", \"a\"),\n    nombre_completo = str_replace_all(nombre_completo, \"é\", \"e\"),\n    nombre_completo = str_replace_all(nombre_completo, \"í\", \"i\"),\n    nombre_completo = str_replace_all(nombre_completo, \"ó\", \"o\"),\n    nombre_completo = str_replace_all(nombre_completo, \"ú\", \"u\"),\n    nombre_completo = str_replace_all(nombre_completo, \"ñ\", \"n\"),\n\n    # Paso 3: Eliminamos símbolos no deseados como @, guiones bajos, espacios múltiples\n    nombre_completo = str_replace_all(nombre_completo, \"@\", \"a\"),\n    nombre_completo = str_replace_all(nombre_completo, \"_\", \" \"),\n    nombre_completo = str_replace_all(nombre_completo, \"[[:space:]]+\", \" \"),\n    nombre_completo = str_trim(nombre_completo),  # elimina espacios al inicio o final\n\n    # Paso 4: Correcciones específicas a errores conocidos por observación del dataset\n    nombre_completo = case_when(\n      str_detect(nombre_completo, \"sofiaramos\") ~ \"sofia ramos\",\n      str_detect(nombre_completo, \"anaperez\") ~ \"ana perez\",\n      str_detect(nombre_completo, \"luciahuerta\") ~ \"lucia huerta\",\n      str_detect(nombre_completo, \"mariovargas\") ~ \"mario vargas\",\n      str_detect(nombre_completo, \"carlosdiaz\") ~ \"carlos diaz\",\n      str_detect(nombre_completo, \"luisgomez\") ~ \"luis gomez\",\n      TRUE ~ nombre_completo\n    ),\n\n    # Paso 5: Finalizamos capitalizando la primera letra de cada palabra \n    nombre_completo = str_to_title(nombre_completo)\n  )\n```\n\nCon estas transformaciones, se evita que registros iguales aparezcan como diferentes por errores de digitación, acentos o diferencias en capitalización.\n\n**Homogeneización de la variable** `sexo`\n\nEn variables categóricas como `sexo`, donde pueden coexistir múltiples formas de referirse a una misma categoría (\"masculino\", \"m\", \"hombre\", etc.), es fundamental normalizar los valores. Aplicamos una transformación similar:\n\n```{r}\ndf = df %>%\n  mutate(\n    # Paso 1: Todo a minúsculas\n    sexo = tolower(sexo),\n\n    # Paso 2: Reescribimos variantes en etiquetas estándar\n    sexo = case_when(\n      sexo %in% c(\"masculino\", \"m\", \"hombre\") ~ \"masculino\",\n      sexo %in% c(\"femenino\", \"f\", \"mujer\") ~ \"femenino\",\n      TRUE ~ NA_character_  # valores irreconocibles se dejan como NA\n    )\n  )\n```\n\nEn este punto, la base ya está considerablemente más limpia y lista para ser usada con métodos estadísticos o gráficos.\n\n```{r}\nhead(df)\n```\n\n3.  Valores perdidos\n\nEn el análisis de datos reales, lidiar con valores perdidos es inevitable. Ya sea por errores en la recolección, datos incompletos o fallas de ingreso, siempre es necesario diagnosticar y decidir cómo abordarlos.\n\nEl paquete `naniar` facilita la visualización y exploración de patrones de `NA` en un dataset. Permite entender en qué columnas se concentran los valores faltantes y si hay patrones comunes entre ellos.\n\n```{r}\nlibrary(naniar)\n```\n\nUna forma rápida de visualizar cuántos `NA` hay por variable es:\n\n```{r}\ngg_miss_var(df)\n```\n\nY si deseamos identificar observaciones con múltiples valores perdidos, usamos:\n\n```{r}\ngg_miss_case(df)\n```\n\nEsto nos ayuda a decidir si queremos eliminar observaciones o columnas con muchos datos ausentes o proceder a imputarlos. A veces basta con eliminar observaciones incompletas si son pocas o si el análisis requiere datos completos. `tidyr` ofrece funciones útiles como `drop_na()`:\n\nEliminar observaciones con `NA` **en columnas clave** (por ejemplo, nombre o sexo):\n\n```{r}\ndf = df %>%\n  drop_na(nombre_completo, sexo, encuesta_fecha) \n\ndim(df)\n```\n\nEliminar observaciones con al menos un `NA` en **cualquier columna**:\n\n```{r}\ndf %>%\n  drop_na() %>% \n  dim()\n```\n\nEsto reduce el tamaño de la base pero garantiza integridad completa. Sin embargo, no siempre es deseable perder datos. En esos casos, se puede imputar.\n\nEl paquete `mice` (*Multivariate Imputation by Chained Equations*) permite realizar una **imputación más inteligente**, modelando los valores ausentes con base en otras variables.\n\n```{r}\nlibrary(mice)\n```\n\nEste paquete nos permite aplicar un algoritmo de imputación. Por ejemplo, para una imputación rápida:\n\n```{r, warning=FALSE}\nimputado = mice(df, m = 1, method = \"pmm\", seed = 123)\n```\n\n-   `m = 1`: número de datasets imputados. Se puede aumentar si se desea evaluar incertidumbre.\n-   `method = \"pmm\"`: *predictive mean matching*, útil para imputar variables numéricas.\n-   `seed`: asegura que los resultados sean reproducibles.\n\nUna vez realizado el proceso, se extrae el dataset completo con:\n\n```{r}\ndf = complete(imputado)\n```\n\nCon esto, se preservan todas las observaciones, pero con los valores faltantes sustituidos por predicciones consistentes con la estructura de los datos. Este método es especialmente útil cuando hay varias variables correlacionadas o cuando perder datos no es una opción que podamos costear.\n\n```{r}\ngg_miss_var(df)\n```\n\n```{r}\nhead(df)\n```\n\n3.  Observaciones duplicados\n\nLos duplicados pueden surgir por errores en la recolección, registros múltiples del mismo individuo o procesos de integración de bases de datos. Si no se detectan y corrigen, pueden sesgar promedios, inflar conteos y distorsionar cualquier análisis posterior.\n\nLa forma más directa de detectar duplicados es verificar si existen filas exactamente iguales en todas las columnas:\n\n```{r}\ndf %>% \n  duplicated() %>% \n  sum()\n```\n\nSi se desea ver cuáles son esos duplicados exactos:\n\n```{r}\ndf %>% \n  filter(duplicated(.))\n```\n\nPodemos eliminarlos con `distinct()`, que retiene únicamente las filas únicas:\n\n```{r}\ndf = df %>% \n  distinct()\n```\n\nLo que nos deja con:\n\n```{r}\ndf %>% \n  duplicated() %>% \n  sum()\n```\n\n4.  Tidyr\n\nUna vez corregidos errores en las variables categóricas y estandarizados los valores faltantes o inconsistentes, es común encontrarse con problemas estructurales. Algunas columnas pueden estar duplicando información, otras pueden combinar múltiples variables en una sola. Aquí es donde entra en juego el paquete `tidyr`.\n\nEste paquete permite reorganizar los datos sin alterar su contenido: separar, unir, pivotear, rellenar o completar estructuras incompletas. Por ejemplo:\n\n**Separar: descomponer** `nombre_completo` **en** `nombre` **y** `apellido`\n\n```{r}\nlibrary(tidyr)\n\n# Separar nuevamente desde nombre_completo para asegurar consistencia\ndf = df %>%\n  separate(nombre_completo, into = c(\"nombre\", \"apellido\"), sep = \" \", extra = \"merge\", remove = FALSE)\n```\n\n-   `sep = \" \"`: se separa por el primer espacio en blanco.\n-   `extra = \"merge\"`: en caso haya más de dos componentes (ej. \"Maria del Carmen\"), los combina en `apellido`.\n-   `remove = FALSE`: conservamos la columna original por trazabilidad.\n\n```{r}\nhead(df)\n```\n\n**Unir: combinar** `puntaje_1`, `puntaje_2` **y** `puntaje_3` **en una sola columna**\n\nEn análisis posteriores puede ser útil pivotear los puntajes para analizar cada respuesta como una fila individual. Esto facilita la creación de gráficos o modelos que trabajen sobre respuestas individuales:\n\n```{r}\ndf = df %>%\n  # Sumamos todas las que empiezan con 'puntaje'\n  pivot_longer(cols = starts_with(\"puntaje_\"),\n               names_to = \"pregunta\",\n               values_to = \"puntaje\")\n```\n\nAhora cada persona aparece tres veces (una por pregunta), lo cual permite comparar puntuaciones medias entre preguntas o agrupar por categorías ahora que tenemos la variable categórica `pregunta`.\n\nAsí quedo nuestro dataset luego de la limpieza\n\n```{r}\nhead(df, 12)\n```\n\n## Dplyr para manipulacion de datos\n\nEl paquete dplyr es uno de los más utilizados en R para manipulación y transformación de datos. El operador %\\>% (pipe) es una herramienta central que permite encadenar funciones, pasando el resultado de una función como entrada a la siguiente.\n\n```{r, echo=FALSE, warning=FALSE, include = FALSE}\nlibrary(dplyr)\n```\n\n1.  `filter`: Filtrar filas según una condición\n\nEsta función selecciona solo las filas que cumplen con una o más condiciones.\n\n```{r}\n# Filtrar encuestados mayores de 30 años\nencuesta %>%\n  filter(Edad > 30) %>% \n  head(10)\n```\n\n```{r}\n# Filtrar mujeres con educación universitaria\nencuesta %>%\n  filter(Genero == \"F\", Educacion == \"Universitaria\") %>% \n  head(10)\n```\n\n2.  `select`: Seleccionar columnas específicas\n\nEsta función te permite elegir las columnas necesarias.\n\n```{r}\n# Seleccionar columnas relevantes\nencuesta %>%\n  select(ID, Genero, Satisfaccion) %>% \n  head(10)\n```\n\n3.  `mutate`: Crear o modificar columnas\n\nAñade nuevas columnas o modifica las existentes.\n\n```{r}\n# Crear una columna que clasifique a las personas como \"Joven\" o \"Adulto\"\nencuesta %>%\n# Personas menores o iguales a 30 como \"Jovenes\"\n  mutate(RangoEdad = \n           ifelse(Edad <= 30, \"Joven\", \"Adulto\")) %>% \n  head(10)\n```\n\n4.  `arrange`: Ordenar filas\n\nOrdena las filas del data frame según una o más columnas.\n\n```{r}\n# Ordenar por edad de menor a mayor\nencuesta %>%\n  arrange(Edad) %>% \n  head(10)\n```\n\n```{r}\n# Ordenar por satisfacción de mayor a menor\nencuesta %>%\n  arrange(desc(Satisfaccion)) %>% \n  head(10)\n```\n\n```{r}\n# Ordenar primero por género y luego por nivel educativo\nencuesta %>%\n  arrange(Genero, desc(Educacion)) %>% \n  head(10)\n```\n\n5.  Resumir datos (agrupados)\n\n-   `reframe` Calcula métricas agregadas como promedios, totales o máximos en devolver cualquier número de filas por grupo.\n-   `group_by()` agrupa los datos según una o más columnas. Esto significa que las filas se organizan en grupos definidos por los valores únicos de las columnas seleccionadas sin modificar el contenido del data framepor si solo.\n\n`reframe\\`: Calculamos la satisfacción promedio y el rango de edades por género, reduciendo los datos a una fila por grupo.\n\n```{r}\n# Calcular métricas resumidas por género\nencuesta %>%\n  group_by(Genero) %>% # Agrupar por género\n  reframe(\n# Promedio de satisfacción\n        SatisfaccionPromedio = mean(Satisfaccion)\n  ) \n```\n\n`reframe` con `group_by`: Agrupar y resumir datos.\n\n```{r}\n# Calcular satisfacción promedio por género\nresumen_genero = encuesta %>%\n  group_by(Genero) %>%\n  reframe(SatisfaccionPromedio = mean(Satisfaccion))\nresumen_genero\n```\n\n```{r}\n# Calcular edad máxima y mínima por nivel educativo\nresumen_educacion = encuesta %>%\n  group_by(Educacion) %>%\n  reframe(\n    EdadMaxima = max(Edad),\n    EdadMinima = min(Edad)\n  )\nresumen_educacion\n```\n\nPuedes realizar varias operaciones en una sola secuencia. Por ejemplo:\n\n**Filtrar adultos, calcular satisfacción promedio por rango de edad y ordenar resultados.**\n\n```{r}\n# Filtrar, agrupar y ordenar\nencuesta %>%\n# Personas menores o iguales a 30 como \"Jovenes\"\n  mutate(RangoEdad = \n           ifelse(Edad <= 30, \"Joven\", \"Adulto\")) %>%\n# Agrupar por género\n      group_by(RangoEdad) %>%   \n# Calcular métricas resumidas\n      summarise(             \n      SatisfaccionPromedio = mean(Satisfaccion)) %>%\n# Ordenar por satisfacción promedio\n  arrange(desc(SatisfaccionPromedio)) \n```\n\nSí, hay varias funciones interesantes en **`dplyr`** que podrías agregar a tu apartado para ampliar las capacidades de manipulación de datos. Aquí te dejo algunas funciones adicionales que pueden mejorar el análisis y limpieza de datos:\n\n6.  `rename()`: Renombrar columnas\n\n    Si necesitas cambiar el nombre de una columna, puedes usar `rename()`.\\\n\n```{r}\nencuesta %>%\n  rename(Satisfaccion_Gestion = Satisfaccion) %>% \n  head(3)\n```\n\n7.  `relocate()`: Reordenar columnas\n\n    Si quieres cambiar el orden de las columnas en un `data.frame`, usa `relocate()`.\n\n```{r}\nencuesta %>%\n  relocate(Satisfaccion, .before = ID) %>% \n  head(3)\n```\n\n8.  `distinct()`: Eliminar duplicados\n\n    Si hay valores duplicados en el `data.frame`, `distinct()` los elimina y deja solo las observaciones únicas.\\\n\n```{r}\nencuesta %>%\n  distinct() %>% \n  head(3)\n```\n\n9.  `count()`: Contar frecuencias de una variable categórica\n\n    Puedes contar la cantidad de observaciones por categoría.\\\n\n```{r}\nencuesta %>%\n  count(Educacion)\n```\n\n10. `slice()`: Seleccionar filas específicas\n\n    Si necesitas extraer ciertas filas según su posición:\\\n\n```{r}\n# Seleccionar las primeras 3 filas\nencuesta %>%\n  slice(1:3)\n\n# Seleccionar la fila número 5\nencuesta %>%\n  slice(5)\n```\n\n11. `case_when()`: Crear variables con múltiples condiciones\n\n    Es una versión más potente de `ifelse()`, útil cuando tienes muchas condiciones.\\\n\n```{r}\n# Crear una columna con niveles de satisfacción\nencuesta %>%\n  mutate(Satisfaccion_Categoria = case_when(\n    Satisfaccion >= 4 ~ \"Alta\",\n    Satisfaccion == 3 ~ \"Media\",\n    TRUE ~ \"Baja\"\n  )) %>% \n  head(10)\n```\n\n## Ggplot para la elaboración de gráficos\n\nEl paquete **`ggplot2`** es una herramienta poderosa para la visualización de datos en R. Se basa en **capas (`layers`)**, lo que permite personalizar gráficos de manera progresiva.\n\n```{r}\nlibrary(ggplot2)\n```\n\nHay algunos argumentos generales que pueden usarse en la mayoría de gráficos\n\n| **Argumento** | **Descripción**                                   |\n|---------------|---------------------------------------------------|\n| `color`       | Color del borde de elementos gráficos             |\n| `fill`        | Color de relleno en elementos como barras o áreas |\n| `alpha`       | Nivel de transparencia (0 a 1)                    |\n| `size`        | Tamaño de puntos, líneas o texto                  |\n| `shape`       | Forma de los puntos (en `geom_point()`)           |\n| `linetype`    | Tipo de línea (continua, punteada, etc.)          |\n| `stroke`      | Grosor del borde en puntos                        |\n\n1.  Gráfico de Dispersión (`geom_point()`)\n\n```{r}\nggplot(encuesta, aes(x = Edad, y = Ingreso)) +\n  geom_point(size = 3, \n             shape = 16, \n             color = \"blue\", \n             alpha = 0.7, \n             stroke = 1) +\n  labs(title = \"Gráfico de Dispersión\", \n       x = \"Edad\", \n       y = \"Ingreso\") +\n  theme_minimal()\n```\n\n2.Histograma (`geom_histogram()`)\n\n```{r}\nggplot(encuesta, aes(x = Ingreso)) +\n  geom_histogram(bins = 10, \n                 fill = \"steelblue\", \n                 color = \"black\", \n                 alpha = 0.7, \n                 boundary = 0) +\n  labs(title = \"Histograma de Ingresos\", \n       x = \"Ingreso\", \n       y = \"Frecuencia\") +\n  theme_minimal()\n```\n\n3.  Boxplot (`geom_boxplot()`)\n\n```{r}\nggplot(encuesta, aes(x = Genero, \n               y = Ingreso, \n               fill = Genero)) +\n  geom_boxplot(outlier.color = \"darkgreen\") +\n  labs(title = \"Boxplot de Ingreso por Género\", \n       x = \"Género\", \n       y = \"Ingreso\") +\n  theme_minimal()\n```\n\n4.  Gráfico de Barras (`geom_bar()`)\n\n```{r}\nggplot(encuesta, aes(x = Educacion, \n               fill = Educacion)) +\n  geom_bar(width = 0.7, \n           alpha = 0.8, \n           color = \"black\") +\n  labs(title = \"Frecuencia de Nivel Educativo\", \n       x = \"Nivel Educativo\", \n       y = \"Cantidad\",\n       fill = \"Niv. Ed.\") +\n  theme_minimal()\n```\n\n5.  Gráfico de Líneas (`geom_line()`)\n\n```{r}\nset.seed(123)\nencuesta %>% \n  sample_n(20) %>% \nggplot(aes(x = Edad, y = Ingreso)) +\n  geom_line(color = \"blue\", size = 1, linetype = \"dashed\") +\n  geom_point(size = 3, color = \"red\") +\n  labs(title = \"Relación Edad vs Ingreso\", x = \"Edad\", y = \"Ingreso\") +\n  theme_light()\n```\n\n6.  Gráfico de Densidad (`geom_density()`)\n\n```{r}\nggplot(encuesta, aes(x = Ingreso)) +\n  geom_density(fill = \"lightblue\", \n               alpha = 0.7, \n               adjust = 1.5, \n               linetype = \"solid\") +\n  labs(title = \"Densidad de Ingresos\", \n       x = \"Ingreso\", \n       y = \"Densidad\") +\n  theme_classic()\n```\n\n7.  Gráfico de Área (`geom_area()`)\n\n```{r}\nggplot(encuesta, aes(x = Edad, \n               y = Ingreso)) +\n  geom_area(fill = \"darkgreen\", \n            alpha = 0.5, \n            linetype = \"dotted\", \n            color = \"black\") +\n  labs(title = \"Área de Relación Edad vs Ingreso\", \n       x = \"Edad\", \n       y = \"Ingreso\") +\n  theme_classic()\n```\n\n8.  Facetas con `facet_wrap()`\n\n```{r}\nggplot(encuesta, aes(x = Ingreso, \n                     fill = Genero)) +\n  geom_histogram(bins = 10, \n                 alpha = 0.7, \n                 color = 'black') +\n  facet_wrap(~Genero) +\n  labs(title = \"Histograma de Ingresos por Género\") +\n  theme_minimal()\n```\n\n9.  Gráfico de Barras Apilado (`position = \"stack\"`)\n\n```{r}\nggplot(encuesta, aes(x = Educacion, \n                     fill = Genero)) +\n  geom_bar(position = \"stack\", \n           alpha = 0.8, \n           width = 0.7) +\n  labs(title = \"Distribución de Género por Nivel Educativo\") +\n  theme_minimal()\n```\n\n10. Gráfico de Barras Apilado Proporcional (`position = \"fill\"`)\n\n```{r}\nggplot(encuesta, aes(x = Educacion, \n                     fill = Genero)) +\n  geom_bar(position = \"fill\") +\n  labs(title = \"Proporción de Género por Nivel Educativo\", \n       y = \"Proporción\") +\n  theme_light()\n```\n\n11. Gráfico de Violin (`geom_violin()`)\n\nUn gráfico de violín combina un boxplot y una curva de densidad, mostrando la distribución de una variable numérica a lo largo de una categórica. Permite visualizar la mediana, la dispersión y la forma de la distribución.\n\n```{r}\nggplot(encuesta, aes(x = Genero, \n                     y = Ingreso, \n                     fill = Genero)) +\n  geom_violin(trim = FALSE, \n              draw_quantiles = c(0.25, 0.5, 0.75)) +\n  labs(title = \"Distribución del Ingreso por Género\", \n       x = \"Género\", \n       y = \"Ingreso\") +\n  theme_minimal()\n```\n\n12. Gráfico de Dispersión con Regresión (`geom_smooth()`)\n\n-   `method = \"lm\"`: Usa regresión lineal.\n-   `se = TRUE`: Muestra el intervalo de confianza.\n\n```{r}\nset.seed(123)\nencuesta %>% \n  sample_n(50) %>% \nggplot(aes(x = Edad, y = Ingreso)) +\n  geom_point(size = 3, color = \"blue\") +\n  geom_smooth(method = \"lm\", se = TRUE, color = \"red\", linetype = \"dashed\") +\n  labs(title = \"Regresión Lineal de Edad vs Ingreso\") +\n  theme_minimal()\n```\n\n## Complementos de ggplot2\n\nEl sistema de visualización de datos en R basado en `ggplot2` ofrece una gran flexibilidad y control para generar gráficos informativos. Sin embargo, siempre podemos ir un paso más allá, ya sea para mejorar la estética, destacar información clave o combinar varias visualizaciones. Para ello, existen una serie de paquetes que complementan a `ggplot2` y amplían significativamente sus capacidades.\n\nUtilicemos los datos de `gapminder` filtrados al 2007 como ejemplo:\n\n```{r}\nlibrary(gapminder)\ngm_07 = gapminder %>% filter(year == 2007)\n```\n\n1.  `ggsci`[@ggsci]\n\nEste paquete proporciona paletas de colores inspiradas en publicaciones científicas reconocidas como *Nature*, *JAMA*, *Lancet*, *NEJM*, entre otras. Es útil cuando se busca una estética profesional y reconocible, especialmente para presentaciones o publicaciones.\n\nLa funciones principales son: `scale_fill_nejm()`, `scale_fill_lancet()`, `scale_fill_jama()` permiten aplicar directamente estas paletas en gráficos con `fill`.\n\n```{r}\nlibrary(ggsci)\n```\n\nNJEJM:\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = continent, \n                  y = lifeExp, \n                  fill = continent)) +\n  geom_boxplot() +\n  scale_fill_nejm() +\n  theme_minimal() +\n  ggtitle(\"Boxplot con paleta NEJM\")\n```\n\nLancet:\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = continent, \n                  y = lifeExp, \n                  fill = continent)) +\n  geom_boxplot() +\n  scale_fill_lancet() +\n  theme_minimal() +\n  ggtitle(\"Boxplot con paleta Lancet\")\n```\n\nJAMA:\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = continent, \n                  y = lifeExp, \n                  fill = continent)) +\n  geom_boxplot() +\n  scale_fill_jama() +\n  theme_minimal() +\n  ggtitle(\"Boxplot con paleta JAMA\")\n```\n\n2.  `viridis`\n\n`viridis` ofrece escalas de color perceptualmente uniformes, es decir, los colores cambian de manera coherente incluso para personas con discapacidad visual o en impresión en blanco y negro. Estas paletas fueron desarrolladas originalmente para Python y se adaptaron a R.\n\n-   Las funciones principales son: `scale_fill_viridis_d()` para variables categóricas y `scale_fill_viridis_c()` para variables continuas.\n-   Los argumentos más importantes son:\n    -   `option` permite seleccionar entre variantes (\"A\", \"B\", \"C\", \"D\", \"E\").\n    -   `direction` para invertir el orden de los colores.\n    -   `guide = 'none'` oculta la leyenda, útil en gráficos facetados.\n\n```{r}\nlibrary(viridis)\n```\n\nTema 'plasma':\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = lifeExp, \n                  fill = continent)) +\n  geom_histogram(binwidth = 3, \n                 color = \"black\", \n                 alpha = 0.8) +\n  scale_fill_viridis_d(guide = 'none', \n                       option = 'C') +\n  facet_wrap(~ continent) +\n  theme_minimal() +\n  ggtitle(\"Histograma de esperanza de vida por continente\")\n```\n\nTema 'cividis':\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = lifeExp, \n                  fill = continent)) +\n  geom_histogram(binwidth = 3, \n                 color = \"black\", \n                 alpha = 0.8) +\n  scale_fill_viridis_d(guide = 'none', \n                       option = 'E') +\n  facet_wrap(~ continent) +\n  theme_minimal() +\n  ggtitle(\"Histograma de esperanza de vida por continente\")\n```\n\nPuede consultar las paletas usando `?scale_fill_viridis`\n\n3.  `patchwork` [@patchwork]\n\nEste paquete permite combinar múltiples gráficos generados con `ggplot2` de forma intuitiva mediante operadores aritméticos. Es especialmente útil para mostrar comparaciones o construir narrativas visuales. - Los gráficos se combinan con `/` (vertical), `|` (horizontal), y `+` para anotaciones conjuntas. - No requiere transformar los gráficos en objetos de grid. Basta con construir gráficos individuales y luego combinarlos directamente.\n\n```{r, fig.width=6, fig.height=4}\nlibrary(patchwork)\n```\n\n```{r, fig.width=6, fig.height=4}\n# Boxplot de lifeExp \np1 = ggplot(gm_07, aes(x = lifeExp, \n                       y = '')) +\n  geom_boxplot(fill = \"darkgreen\", \n               width = 0.4) +\n  theme_minimal() +\n  labs(title = \"Boxplot de esperanza de vida\", \n       x = NULL, \n       y = \"lifeExp\")\n\n# Densidad de lifeExp\np2 = ggplot(gm_07, aes(x = lifeExp)) +\n  geom_density(fill = \"darkgreen\", \n               alpha = 0.6) +\n  theme_minimal() +\n  labs(title = \"Densidad de esperanza de vida\", \n       x = \"lifeExp\", \n       y = \"Densidad\")\n\n# Histograma de lifeExp\np3 = ggplot(gm_07, aes(x = lifeExp)) +\n  geom_histogram(binwidth = 3, \n                 fill = \"darkgreen\", \n                 color = \"black\", \n                 alpha = 0.7) +\n  theme_minimal() +\n  labs(title = \"Histograma de esperanza de vida\", \n       x = \"lifeExp\", \n       y = \"Frecuencia\")\n\n# Gráficos apilados verticalmente\n(p1 / p2 / p3)\n```\n\n4.  `ggthemes` [@ggthemes]\n\nProporciona temas visuales inspirados en medios de comunicación como *The Economist*, *Wall Street Journal* o *FiveThirtyEight*. Estos temas cambian fondo, ejes, tipografía y estilo general del gráfico. Son ideales para producir gráficos estilizados sin necesidad de personalizar manualmente cada elemento gráfico.\n\n```{r}\nlibrary(ggthemes)\n```\n\nThe Economist:\n\n```{r, fig.width=7, fig.height=4}\nggplot(gm_07, aes(x = continent, \n                  y = lifeExp, \n                  fill = continent)) +\n  geom_boxplot() +\n  theme_economist() +\n  scale_fill_economist() +\n  labs(fill = 'Continente') +\n  ggtitle(\"Estilo The Economist\")\n```\n\nWall Street Journal:\n\n```{r, fig.width=7, fig.height=4}\nggplot(gm_07, aes(x = continent, \n                  y = lifeExp, \n                  fill = continent)) +\n  geom_boxplot() +\n  theme_wsj() +\n  scale_fill_economist() +\n  labs(fill = 'Continente') +\n  ggtitle(\"Estilo Wall Street Journal\")\n```\n\n5.  `ggtext` [@ggtext]\n\nEste paquete permite utilizar etiquetas enriquecidas con HTML y Markdown dentro de `ggplot2`. Esto incluye títulos con colores, negritas, saltos de línea y estilos diferenciados por palabra.\n\n-   Funciones clave:\n    -   `element_markdown()` reemplaza a `element_text()` en `theme()` para permitir etiquetas enriquecidas.\n-   Requiere que las etiquetas sean pasadas a `ggtitle()` o `labs()` como texto procesable por `glue::glue()` o expresiones con HTML/Markdown.\n\n```{r}\nlibrary(ggtext)\n```\n\nEstablecemos la relación entre color y continente:\n\n```{r, fig.width=6, fig.height=4}\n# Colores personalizados para cada continente\ncolores_continente = c(\n  Africa = \"#E63946\",\n  Americas = \"#457B9D\",\n  Asia = \"#2A9D8F\",\n  Europe = \"#F4A261\",\n  Oceania = \"#A17DB2\"\n)\n\n# Creamos el título con etiquetas coloreadas en HTML\ntitulo_color = glue::glue(\n  \"Esperanza de vida en 2007 por continente<br>\",\n  \"<span style='color:{colores_continente['Africa']}'>**África**</span>, \",\n  \"<span style='color:{colores_continente['Americas']}'>**Américas**</span>, \",\n  \"<span style='color:{colores_continente['Asia']}'>**Asia**</span>, \",\n  \"<span style='color:{colores_continente['Europe']}'>**Europa**</span>, \",\n  \"<span style='color:{colores_continente['Oceania']}'>**Oceanía**</span>\"\n)\n```\n\nGraficamos:\n\n```{r}\n# Gráfico final\nggplot(gm_07, aes(x = continent, \n                  y = lifeExp, \n                  fill = continent)) +\n  geom_boxplot() +\n  scale_fill_manual(values = colores_continente) +\n  labs(y = 'Esperanza de vida') +\n  theme_minimal() +\n  theme(\n    axis.title.x = element_blank(),\n    axis.text.x = element_blank(),\n    axis.ticks.x = element_blank(),\n    plot.title = element_markdown(size = 14, \n                                  lineheight = 1.2),\n    legend.position = \"none\"\n  ) +\n  ggtitle(titulo_color)\n```\n\n6.  `scales` [@scales]\n\nOfrece herramientas para transformar y dar formato a valores numéricos en los ejes o leyendas de `ggplot2`. Muy útil para mostrar cifras monetarias, porcentajes o unidades más legibles.\n\n-   Existen funciones muy comunes como: `dollar_format()`, `percent_format()`, `comma_format()`, entre otras.\n-   Algunos argumentos importantes son: `prefix` o `suffix` permiten añadir símbolos o unidades y `accuracy` controla el número de decimales.\n\n```{r}\nlibrary(scales)\n```\n\nPodemos utilizarlo para monedas:\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = gdpPercap,\n                  y = lifeExp)) +\n  geom_point(color = \"steelblue\", \n             size = 3, \n             alpha = 0.8) +\n  scale_x_continuous(labels = dollar_format(prefix = \"US$\")) +\n  theme_minimal() +\n  ggtitle(\"Relación entre PIB per cápita y esperanza de vida (USD, 2007)\") +\n  labs(x = \"PIB per cápita (US$)\", \n       y = \"Esperanza de vida (años)\")\n\n```\n\nO para porcentajes:\n\n```{r, fig.width=6, fig.height=4}\n# Clasificamos esperanza de vida\ngm_07 = gm_07 %>%\n  mutate(nivel = cut(lifeExp, breaks = c(0, 60, 75, Inf), \n                     labels = c(\"Baja\", \"Media\", \"Alta\")))\n\n# Gráfico debarra horizontal dividida por proporción y continente\nggplot(gm_07, aes(y = continent, \n                  fill = nivel)) +\n  geom_bar(position = \"fill\", \n           color = \"black\") +\n  scale_x_continuous(labels = percent_format(accuracy = 1), \n                     trans = \"reverse\") +\n  labs(title = \"Distribución proporcional de esperanza de vida por continente (2007)\",\n       x = \"Porcentaje\",\n       y = NULL,\n       fill = \"Esperanza de vida\") +\n  theme_minimal()\n```\n\n7.  `gghighlight` [@gghighlight]\n\nFacilita la tarea de destacar subconjuntos de datos directamente en los gráficos sin tener que filtrar manualmente. Ideal para llamar la atención sobre casos atípicos, valores extremos o categorías específicas. - `gghighlight()` se añade como capa dentro del `ggplot` y permite condicionar el resaltado a una expresión lógica. - Argumentos útiles: - `label_key` permite mostrar etiquetas automáticas para los datos resaltados. - `use_direct_label = TRUE` mejora la legibilidad de gráficos con muchos elementos.\n\n```{r}\nlibrary(gghighlight)\n```\n\n```{r, fig.width=6, fig.height=4}\nggplot(gm_07, aes(x = log(gdpPercap), \n                  y = lifeExp, \n                  label = country)) +\n  geom_point(size = 3, \n             alpha = 0.8) +\n  gghighlight(lifeExp > 82, \n              label_key = country) +\n  theme_minimal() +\n  ggtitle(\"Países con esperanza de vida mayor a 82 en 2007\")\n\n```\n\n## Dlookr para análisis exploratorio\n\nEl análisis exploratorio de datos (EDA) es una etapa crucial antes de aplicar cualquier modelo o técnica inferencial. Permite comprender la estructura de los datos, detectar valores atípicos, evaluar supuestos y descubrir patrones relevantes. El paquete `dlookr` fue diseñado específicamente para facilitar esta etapa.\n\n```{r}\nlibrary(dlookr)\n```\n\n1.  Resumen de Datos y Diagnóstico con `dlookr`\n\nEl paquete `dlookr` permite realizar diagnósticos detallados sobrela información en cada una de las variables en un `data.frame`.\n\n-   Número de observaciones\n\n-   Cantidad de valores perdidos por variable\n\n-   Número de valores únicos\n\n-   Tipo de dato de cada variable\n\n```{r}\ndiagnose(encuesta)\n```\n\n2.  Resumen de Variables Numéricas con `dlookr`\n\nPara obtener un **resumen detallado de las variables numéricas**, usamos `diagnose_numeric()`.\n\n-   Media, mediana, desviación estándar y varianza\n\n-   Valores mínimo y máximo\n\n-   Coeficiente de asimetría (Skewness) y curtosis\n\n-   Valores atípicos detectados\n\n```{r}\ndiagnose_numeric(encuesta)\n```\n\n3.  Resumen de Variables Categóricas con `dlookr`\n\nPara describir las **variables categóricas**, usamos `diagnose_category()`.\n\n```{r}\n# Diagnóstico de variables categóricas\ndiagnose_category(encuesta)\n```\n\nEste diagnóstico proporciona:\n\nFrecuencias absolutas y relativas de cada categoría Cantidad de valores únicos en cada variable categórica\n\nSi queremos visualizar mejor la distribución de una variable categórica, podemos utilizar `count()`:\n\n```{r}\ncount(encuesta, Educacion)\n```\n\n4.  Identificación de Valores Atípicos con `dlookr`\n\n`dlookr` también nos permite detectar **valores atípicos** en las variables numéricas.\n\nEsto mostrará:\n\n-   Cuántos valores atípicos existen\n\n-   Cuáles son esos valores extremos\n\n```{r}\ndiagnose_outlier(encuesta)\n```\n\n5.  Gráficos Descriptivos con `dlookr`\\*\n\nPodemos graficar la **distribución de nuestras variable numérica** con `plot_hist_numeric()`.\n\n```{r}\nplot_hist_numeric(encuesta)\n```\n\nPodemos usar también `plot_box_numeric()` para ver **valores atípicos** y la distribución de la variables numéricas.\n\n```{r}\n\nplot_box_numeric(encuesta)\n```\n\nPodemos usar también `plot_normality` para evaluar la normalidad de cada variable numérica y sus tranformaciones.\n\n```{r}\nplot_normality(encuesta)\n```\n\nPodemos visualizar la frecuencia del variables categóricas con `plot_bar_category()`.\n\n```{r}\nplot_bar_category(encuesta)\n```\n\n6.  Análisis Exploratorio de Correlaciones con `correlate`\n\nPara examinar relaciones entre variables numéricas, podemos usar `correlate()`.\n\n```{r}\n# Matriz de correlaciones\nencuesta %>% \n  select(Edad, Ingreso, Satisfaccion) %>% \n  correlate()\n```\n\nPara visualizar las correlaciones, utilizamos `plot_correlate()`:\n\n```{r, warning=FALSE}\n# Gráfico de correlaciones\nencuesta %>% \n  select(Edad, Ingreso, Satisfaccion) %>% \n  plot_correlate()\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"glosariofunciones.html"},"language":{"toc-title-document":"Tabla de contenidos","toc-title-website":"En esta página","related-formats-title":"Otros formatos","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Fuente","other-links-title":"Otros Enlaces","code-links-title":"Enlaces de código","launch-dev-container-title":"Iniciar Dev Container","launch-binder-title":"Iniciar Binder","article-notebook-label":"Cuaderno de Artículo","notebook-preview-download":"Descargar Cuaderno","notebook-preview-download-src":"Descargar código fuente","notebook-preview-back":"Volver al Artículo","manuscript-meca-bundle":"Archivo MECA","section-title-abstract":"Resumen","section-title-appendices":"Apéndices","section-title-footnotes":"Notas","section-title-references":"Referencias","section-title-reuse":"Reutilización","section-title-copyright":"Derechos de autor","section-title-citation":"Cómo citar","appendix-attribution-cite-as":"Por favor, cita este trabajo como:","appendix-attribution-bibtex":"BibTeX","appendix-view-license":"Ver Licencia","title-block-author-single":"Autor/a","title-block-author-plural":"Autores/as","title-block-affiliation-single":"Afiliación","title-block-affiliation-plural":"Afiliaciones","title-block-published":"Fecha de publicación","title-block-modified":"Fecha de modificación","title-block-keywords":"Palabras clave","callout-tip-title":"Tip","callout-note-title":"Nota","callout-warning-title":"Advertencia","callout-important-title":"Importante","callout-caution-title":"Precaución","code-summary":"Código","code-tools-menu-caption":"Código","code-tools-show-all-code":"Mostrar todo el código","code-tools-hide-all-code":"Ocultar todo el código","code-tools-view-source":"Ver el código fuente","code-tools-source-code":"Ejecutar el código","tools-share":"Compartir","tools-download":"Descargar","code-line":"Línea","code-lines":"Líneas","copy-button-tooltip":"Copiar al portapapeles","copy-button-tooltip-success":"Copiado","repo-action-links-edit":"Editar esta página","repo-action-links-source":"Ver el código","repo-action-links-issue":"Informar de un problema","back-to-top":"Volver arriba","search-no-results-text":"Sin resultados","search-matching-documents-text":"documentos encontrados","search-copy-link-title":"Copiar el enlace en la búsqueda","search-hide-matches-text":"Ocultar resultados adicionales","search-more-match-text":"resultado adicional en este documento","search-more-matches-text":"resultados adicionales en este documento","search-clear-button-title":"Borrar","search-text-placeholder":"","search-detached-cancel-button-title":"Cancelar","search-submit-button-title":"Enviar","search-label":"Buscar","toggle-section":"Alternar sección","toggle-sidebar":"Alternar barra lateral","toggle-dark-mode":"Alternar modo oscuro","toggle-reader-mode":"Alternar modo lector","toggle-navigation":"Navegación de palanca","crossref-fig-title":"Figura","crossref-tbl-title":"Tabla","crossref-lst-title":"Listado","crossref-thm-title":"Teorema","crossref-lem-title":"Lema","crossref-cor-title":"Corolario","crossref-prp-title":"Proposición","crossref-cnj-title":"Conjetura","crossref-def-title":"Definición","crossref-exm-title":"Ejemplo","crossref-exr-title":"Ejercicio","crossref-ch-prefix":"Capítulo","crossref-apx-prefix":"Apéndice","crossref-sec-prefix":"Sección","crossref-eq-prefix":"Ecuación","crossref-lof-title":"Listado de Figuras","crossref-lot-title":"Listado de Tablas","crossref-lol-title":"Listado de Listados","environment-proof-title":"Prueba","environment-remark-title":"Observación","environment-solution-title":"Solución","listing-page-order-by":"Ordenar por","listing-page-order-by-default":"Por defecto","listing-page-order-by-date-asc":"Menos reciente","listing-page-order-by-date-desc":"Más reciente","listing-page-order-by-number-desc":"De mayor a menor","listing-page-order-by-number-asc":"De menor a mayor","listing-page-field-date":"Fecha","listing-page-field-title":"Título","listing-page-field-description":"Descripción","listing-page-field-author":"Autor/a","listing-page-field-filename":"Nombre de archivo","listing-page-field-filemodified":"Fecha de modificación","listing-page-field-subtitle":"Subtítulo","listing-page-field-readingtime":"Tiempo de lectura","listing-page-field-wordcount":"Conteo de Palabras","listing-page-field-categories":"Categorías","listing-page-minutes-compact":"{0} minutos","listing-page-category-all":"Todas","listing-page-no-matches":"No hay resultados","listing-page-words":"{0} palabras","listing-page-filter":"Filtro","draft":"Borrador"},"metadata":{"lang":"es","fig-responsive":true,"quarto-version":"1.5.57","bibliography":["references.bib"],"editor":"visual","theme":"cosmo"},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"pdflatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","toc":true,"number-sections":true,"include-in-header":["include.tex"],"output-file":"glosariofunciones.pdf"},"language":{"toc-title-document":"Tabla de contenidos","toc-title-website":"En esta página","related-formats-title":"Otros formatos","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Fuente","other-links-title":"Otros Enlaces","code-links-title":"Enlaces de código","launch-dev-container-title":"Iniciar Dev Container","launch-binder-title":"Iniciar Binder","article-notebook-label":"Cuaderno de Artículo","notebook-preview-download":"Descargar Cuaderno","notebook-preview-download-src":"Descargar código fuente","notebook-preview-back":"Volver al Artículo","manuscript-meca-bundle":"Archivo MECA","section-title-abstract":"Resumen","section-title-appendices":"Apéndices","section-title-footnotes":"Notas","section-title-references":"Referencias","section-title-reuse":"Reutilización","section-title-copyright":"Derechos de autor","section-title-citation":"Cómo citar","appendix-attribution-cite-as":"Por favor, cita este trabajo como:","appendix-attribution-bibtex":"BibTeX","appendix-view-license":"Ver Licencia","title-block-author-single":"Autor/a","title-block-author-plural":"Autores/as","title-block-affiliation-single":"Afiliación","title-block-affiliation-plural":"Afiliaciones","title-block-published":"Fecha de publicación","title-block-modified":"Fecha de modificación","title-block-keywords":"Palabras clave","callout-tip-title":"Tip","callout-note-title":"Nota","callout-warning-title":"Advertencia","callout-important-title":"Importante","callout-caution-title":"Precaución","code-summary":"Código","code-tools-menu-caption":"Código","code-tools-show-all-code":"Mostrar todo el código","code-tools-hide-all-code":"Ocultar todo el código","code-tools-view-source":"Ver el código fuente","code-tools-source-code":"Ejecutar el código","tools-share":"Compartir","tools-download":"Descargar","code-line":"Línea","code-lines":"Líneas","copy-button-tooltip":"Copiar al portapapeles","copy-button-tooltip-success":"Copiado","repo-action-links-edit":"Editar esta página","repo-action-links-source":"Ver el código","repo-action-links-issue":"Informar de un problema","back-to-top":"Volver arriba","search-no-results-text":"Sin resultados","search-matching-documents-text":"documentos encontrados","search-copy-link-title":"Copiar el enlace en la búsqueda","search-hide-matches-text":"Ocultar resultados adicionales","search-more-match-text":"resultado adicional en este documento","search-more-matches-text":"resultados adicionales en este documento","search-clear-button-title":"Borrar","search-text-placeholder":"","search-detached-cancel-button-title":"Cancelar","search-submit-button-title":"Enviar","search-label":"Buscar","toggle-section":"Alternar sección","toggle-sidebar":"Alternar barra lateral","toggle-dark-mode":"Alternar modo oscuro","toggle-reader-mode":"Alternar modo lector","toggle-navigation":"Navegación de palanca","crossref-fig-title":"Figura","crossref-tbl-title":"Tabla","crossref-lst-title":"Listado","crossref-thm-title":"Teorema","crossref-lem-title":"Lema","crossref-cor-title":"Corolario","crossref-prp-title":"Proposición","crossref-cnj-title":"Conjetura","crossref-def-title":"Definición","crossref-exm-title":"Ejemplo","crossref-exr-title":"Ejercicio","crossref-ch-prefix":"Capítulo","crossref-apx-prefix":"Apéndice","crossref-sec-prefix":"Sección","crossref-eq-prefix":"Ecuación","crossref-lof-title":"Listado de Figuras","crossref-lot-title":"Listado de Tablas","crossref-lol-title":"Listado de Listados","environment-proof-title":"Prueba","environment-remark-title":"Observación","environment-solution-title":"Solución","listing-page-order-by":"Ordenar por","listing-page-order-by-default":"Por defecto","listing-page-order-by-date-asc":"Menos reciente","listing-page-order-by-date-desc":"Más reciente","listing-page-order-by-number-desc":"De mayor a menor","listing-page-order-by-number-asc":"De menor a mayor","listing-page-field-date":"Fecha","listing-page-field-title":"Título","listing-page-field-description":"Descripción","listing-page-field-author":"Autor/a","listing-page-field-filename":"Nombre de archivo","listing-page-field-filemodified":"Fecha de modificación","listing-page-field-subtitle":"Subtítulo","listing-page-field-readingtime":"Tiempo de lectura","listing-page-field-wordcount":"Conteo de Palabras","listing-page-field-categories":"Categorías","listing-page-minutes-compact":"{0} minutos","listing-page-category-all":"Todas","listing-page-no-matches":"No hay resultados","listing-page-words":"{0} palabras","listing-page-filter":"Filtro","draft":"Borrador"},"metadata":{"block-headings":true,"lang":"es","bibliography":["references.bib"],"editor":"visual","documentclass":"scrreprt","classoption":["twoside"],"geometry":"inner=3.2cm, outer=2.5cm, top=2.5cm, bottom=2.8cm, includeheadfoot"},"extensions":{"book":{"selfContainedOutput":true}}},"epub":{"identifier":{"display-name":"ePub","target-format":"epub","base-format":"epub"},"execute":{"fig-width":5,"fig-height":4,"fig-format":"png","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"epub","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":false,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"default-image-extension":"png","html-math-method":"mathml","to":"epub","toc":true,"number-sections":true,"output-file":"glosariofunciones.epub"},"language":{"toc-title-document":"Tabla de contenidos","toc-title-website":"En esta página","related-formats-title":"Otros formatos","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Fuente","other-links-title":"Otros Enlaces","code-links-title":"Enlaces de código","launch-dev-container-title":"Iniciar Dev Container","launch-binder-title":"Iniciar Binder","article-notebook-label":"Cuaderno de Artículo","notebook-preview-download":"Descargar Cuaderno","notebook-preview-download-src":"Descargar código fuente","notebook-preview-back":"Volver al Artículo","manuscript-meca-bundle":"Archivo MECA","section-title-abstract":"Resumen","section-title-appendices":"Apéndices","section-title-footnotes":"Notas","section-title-references":"Referencias","section-title-reuse":"Reutilización","section-title-copyright":"Derechos de autor","section-title-citation":"Cómo citar","appendix-attribution-cite-as":"Por favor, cita este trabajo como:","appendix-attribution-bibtex":"BibTeX","appendix-view-license":"Ver Licencia","title-block-author-single":"Autor/a","title-block-author-plural":"Autores/as","title-block-affiliation-single":"Afiliación","title-block-affiliation-plural":"Afiliaciones","title-block-published":"Fecha de publicación","title-block-modified":"Fecha de modificación","title-block-keywords":"Palabras clave","callout-tip-title":"Tip","callout-note-title":"Nota","callout-warning-title":"Advertencia","callout-important-title":"Importante","callout-caution-title":"Precaución","code-summary":"Código","code-tools-menu-caption":"Código","code-tools-show-all-code":"Mostrar todo el código","code-tools-hide-all-code":"Ocultar todo el código","code-tools-view-source":"Ver el código fuente","code-tools-source-code":"Ejecutar el código","tools-share":"Compartir","tools-download":"Descargar","code-line":"Línea","code-lines":"Líneas","copy-button-tooltip":"Copiar al portapapeles","copy-button-tooltip-success":"Copiado","repo-action-links-edit":"Editar esta página","repo-action-links-source":"Ver el código","repo-action-links-issue":"Informar de un problema","back-to-top":"Volver arriba","search-no-results-text":"Sin resultados","search-matching-documents-text":"documentos encontrados","search-copy-link-title":"Copiar el enlace en la búsqueda","search-hide-matches-text":"Ocultar resultados adicionales","search-more-match-text":"resultado adicional en este documento","search-more-matches-text":"resultados adicionales en este documento","search-clear-button-title":"Borrar","search-text-placeholder":"","search-detached-cancel-button-title":"Cancelar","search-submit-button-title":"Enviar","search-label":"Buscar","toggle-section":"Alternar sección","toggle-sidebar":"Alternar barra lateral","toggle-dark-mode":"Alternar modo oscuro","toggle-reader-mode":"Alternar modo lector","toggle-navigation":"Navegación de palanca","crossref-fig-title":"Figura","crossref-tbl-title":"Tabla","crossref-lst-title":"Listado","crossref-thm-title":"Teorema","crossref-lem-title":"Lema","crossref-cor-title":"Corolario","crossref-prp-title":"Proposición","crossref-cnj-title":"Conjetura","crossref-def-title":"Definición","crossref-exm-title":"Ejemplo","crossref-exr-title":"Ejercicio","crossref-ch-prefix":"Capítulo","crossref-apx-prefix":"Apéndice","crossref-sec-prefix":"Sección","crossref-eq-prefix":"Ecuación","crossref-lof-title":"Listado de Figuras","crossref-lot-title":"Listado de Tablas","crossref-lol-title":"Listado de Listados","environment-proof-title":"Prueba","environment-remark-title":"Observación","environment-solution-title":"Solución","listing-page-order-by":"Ordenar por","listing-page-order-by-default":"Por defecto","listing-page-order-by-date-asc":"Menos reciente","listing-page-order-by-date-desc":"Más reciente","listing-page-order-by-number-desc":"De mayor a menor","listing-page-order-by-number-asc":"De menor a mayor","listing-page-field-date":"Fecha","listing-page-field-title":"Título","listing-page-field-description":"Descripción","listing-page-field-author":"Autor/a","listing-page-field-filename":"Nombre de archivo","listing-page-field-filemodified":"Fecha de modificación","listing-page-field-subtitle":"Subtítulo","listing-page-field-readingtime":"Tiempo de lectura","listing-page-field-wordcount":"Conteo de Palabras","listing-page-field-categories":"Categorías","listing-page-minutes-compact":"{0} minutos","listing-page-category-all":"Todas","listing-page-no-matches":"No hay resultados","listing-page-words":"{0} palabras","listing-page-filter":"Filtro","draft":"Borrador"},"metadata":{"lang":"es","bibliography":["references.bib"],"editor":"visual","cover-image":"portada.jpg"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf","epub"]}